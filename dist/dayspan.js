!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("ds",[],e):"object"==typeof exports?exports.ds=e():t.ds=e()}(this,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var r;n.r(e),function(t){t[t.CONTINUE=0]="CONTINUE",t[t.STOP=1]="STOP",t[t.REMOVE=2]="REMOVE",t[t.REPLACE=3]="REPLACE"}(r||(r={}));var i=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},o=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)u.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return u},u=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t},s=function(){function t(t,e){this.result=null,this.source=t,e&&(this.equality=e.equality,this.comparator=e.comparator)}return t.prototype.onReset=function(t){return this.handleReset=t,this},t.prototype.canReset=function(){return!!this.handleReset},t.prototype.reset=function(t,e){if(void 0===e&&(e=!0),this.handleReset)this.handleReset(t);else if(e)throw new Error("This iterator does not support reset.");return this},t.prototype.clone=function(){return new t(this.source,this)},t.prototype.act=function(t,e){return this.action=r.CONTINUE,this.replaceWith=null,this.callback(t,e,this),this.action},t.prototype.stop=function(t){return this.result=t,this.action=r.STOP,this},t.prototype.isStopped=function(){return this.action===r.STOP},t.prototype.replace=function(t){return this.replaceWith=t,this.action=r.REPLACE,this},t.prototype.remove=function(){return this.action=r.REMOVE,this},t.prototype.withEquality=function(t){return this.equality=t,this},t.prototype.withComparator=function(t){return this.comparator=t,this.equality||(this.equality=function(e,n){return 0===t(e,n)}),this},t.prototype.withLogic=function(t,e){return this.comparator=t,this.equality=e||function(e,n,r,i){return 0===t(e,n,r,i)},this},t.prototype.numbers=function(t,e){return void 0===t&&(t=!0),void 0===e&&(e=!1),this.withLogic(y(t,e))},t.prototype.strings=function(t,e,n){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!1),this.withLogic(v(t,e,n))},t.prototype.dates=function(t,e,n,r){return void 0===t&&(t=1),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===r&&(r=!1),this.withLogic(m(n,r),O(t,e))},t.prototype.desc=function(t){var e=t||this.comparator;return this.comparator=function(t,n,r,i){return e(n,t,i,r)},this},t.prototype.getEquality=function(t){return t||this.equality||function(t,e){return 0===d(t,e,!0)}},t.prototype.getComparator=function(t){return t||this.comparator||function(t,e){return d(t,e,!1)}},t.prototype.empty=function(t){var e=!this.each(function(t,e,n){return n.stop()}).isStopped();return t?(t(e),this):e},t.prototype.has=function(t){var e=this.each(function(t,e,n){return n.stop()}).isStopped();return t?(t(e),this):e},t.prototype.contains=function(t,e){var n=this.getEquality(),r=this.where(function(e,r){return n(e,t,r)}).has();return e?(e(r),this):r},t.prototype.count=function(t){var e=0;return this.each(function(){return e++}),t?(t(e),this):e},t.prototype.first=function(t){var e=this.each(function(t,e,n){return n.stop(t)}).result;return t?(t(e),this):e},t.prototype.last=function(t){var e=null;return this.each(function(t){return e=t}),t?(t(e),this):e},t.prototype.array=function(t,e){void 0===t&&(t=[]);var n=h(t)?[]:t,r=h(t)?t:e;return this.each(function(t){return n.push(t)}),r?(r(n),this):n},t.prototype.entries=function(t,e){void 0===t&&(t=[]);var n=h(t)?[]:t,r=h(t)?t:e;return this.each(function(t,e){return n.push([e,t])}),r?(r(n),this):n},t.prototype.object=function(t,e,n){void 0===e&&(e=Object.create(null));var r=h(e)?Object.create(null):e,i=h(e)?e:n;return this.each(function(e){return r[t(e)]=e}),i?(i(r),this):r},t.prototype.set=function(t,e){void 0===t&&(t=new Set);var n=h(t)?new Set:t,r=h(t)?t:e;return this.each(function(t){return n.add(t)}),r?(r(n),this):n},t.prototype.map=function(t,e){void 0===t&&(t=new Map);var n=h(t)?new Map:t,r=h(t)?t:e;return this.each(function(t,e){return n.set(e,t)}),r?(r(n),this):n},t.prototype.group=function(t,e,n){void 0===e&&(e=Object.create(null));var r=h(e)?Object.create(null):e,i=h(e)?e:n;return this.each(function(e){var n=t(e);n in r?r[n].push(e):r[n]=[e]}),i?(i(r),this):r},t.prototype.reduce=function(t,e,n){var r=t;return this.each(function(t){return r=e(t,r)}),n?(n(r),this):r},t.prototype.min=function(t){var e=this.getComparator(),n=this.reduce(null,function(t,n){return null===n||e(t,n)<0?t:n});return t?(t(n),this):n},t.prototype.max=function(t){var e=this.getComparator(),n=this.reduce(null,function(t,n){return null===n||e(t,n)>0?t:n});return t?(t(n),this):n},t.prototype.changes=function(t,e,n,u){var s,a,f=this;this.history||(this.history=new Map);var c=new Map(this.history);this.each(function(e,i,o){var s=u?u(e,i,o):e;f.history.has(s)?n(e,i,o):(t(e,i,o),o.result!==r.REMOVE&&f.history.set(s,[i,e])),c.delete(s)});try{for(var h=i(c.values()),l=h.next();!l.done;l=h.next()){var p=o(l.value,2),d=p[0];e(p[1],d,this)}}catch(t){s={error:t}}finally{try{l&&!l.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return this},t.prototype.delete=function(){return this.each(function(t,e,n){return n.remove()})},t.prototype.extract=function(e){var n=[];this.each(function(t,e,r){return n.push([e,t])&&r.remove()});var r=t.entries(n);return e?(e(r),this):r},t.prototype.overwrite=function(t){return this.each(function(e,n,r){return r.replace(t)})},t.prototype.update=function(t){return this.each(function(e,n,r){return r.replace(t(e,n))})},t.prototype.fork=function(t){return t(this),this},t.prototype.split=function(t,e){var n=this.where(t),r=this.not(t);return e?(e(n,r),this):{pass:n,fail:r}},t.prototype.unzip=function(t){var e=this.keys(),n=this.values();return t?(t(e,n),this):{keys:e,values:n}},t.prototype.keys=function(){var e=this;return new t(function(t){var n=0;e.each(function(e,i,o){switch(t.act(i,n++)){case r.STOP:o.stop();break;case r.REMOVE:o.remove();break;case r.REPLACE:}})}).onReset(this.handleReset)},t.prototype.values=function(){var e=this;return new t(function(t){e.each(function(e,n,i){var o=0;switch(t.act(e,o++)){case r.STOP:i.stop();break;case r.REMOVE:i.remove();break;case r.REPLACE:i.replace(t.replaceWith)}})},this).onReset(this.handleReset)},t.prototype.view=function(e,n,i,o){var u=this;return new t(function(t){var s=e();u.each(function(e,u,a){if(n(s,e,u)){switch(t.act(e,u)){case r.STOP:a.stop();break;case r.REMOVE:a.remove();break;case r.REPLACE:a.replace(t.replaceWith)}i&&i(s,e,u,a)}else o&&o(s,e,u,a)})},this).onReset(this.handleReset)},t.prototype.take=function(e){return e<=0?t.empty():this.view(function(){return{amount:e}},function(t){return t.amount>0},function(t){return t.amount--},function(t,e,n,r){return r.stop()})},t.prototype.skip=function(t){return this.view(function(){return{skipped:0}},function(e){return e.skipped>=t},function(t){return t.skipped++},function(t){return t.skipped++})},t.prototype.drop=function(t){return this.reverse().skip(t).reverse()},t.prototype.append=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.join.apply(t,u([this],e)).onReset(this.handleReset)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.join.apply(t,u(e,[this])).onReset(this.handleReset)},t.prototype.where=function(t){return this.view(function(){return null},function(e,n,r){return t(n,r)})},t.prototype.not=function(t){return this.view(function(){return null},function(e,n,r){return!t(n,r)})},t.prototype.gt=function(t,e){var n=this;return this.view(function(){return n.getComparator(e)},function(e,n,r){return e(n,t,r)>0})},t.prototype.gte=function(t,e){var n=this;return this.view(function(){return n.getComparator(e)},function(e,n,r){return e(n,t,r)>=0})},t.prototype.lt=function(t,e){var n=this;return this.view(function(){return n.getComparator(e)},function(e,n,r){return e(n,t,r)<0})},t.prototype.lte=function(t,e){var n=this;return this.view(function(){return n.getComparator(e)},function(e,n,r){return e(n,t,r)<=0})},t.prototype.exclude=function(t,e){var n=this;return this.view(function(){return c(t).withEquality(n.getEquality(e))},function(t,e){return!t.contains(e)})},t.prototype.intersect=function(t,e){var n=this;return this.view(function(){return c(t).withEquality(n.getEquality(e))},function(t,e){return t.contains(e)})},t.prototype.unique=function(t){var e=this;return this.view(function(){return{existing:[],isEqual:e.getEquality(t)}},function(t,e,n){var r=t.existing,i=t.isEqual;return-1===r.findIndex(function(t){var r=o(t,2),u=r[0],s=r[1];return i(s,e,u,n)})},function(t,e,n){return t.existing.push([n,e])})},t.prototype.duplicates=function(t,e){var n=this;return void 0===t&&(t=!1),this.view(function(){return{existing:[],once:[],isEqual:n.getEquality(e)}},function(e,n,r){var i=e.existing,u=e.once,s=e.isEqual,a=i.findIndex(function(t){var e=o(t,2),i=e[0],u=e[1];return s(u,n,i,r)}),f=-1!==a;return f?(u[a]&&t&&(f=!1),u[a]=!0):i.push([r,n]),f})},t.prototype.readonly=function(){var e=this;return new t(function(t){e.each(function(e,n,i){t.act(e,n)===r.STOP&&i.stop()})},this).onReset(this.handleReset)},t.prototype.copy=function(){return t.entries(this.entries())},t.prototype.viewResolved=function(e){var n=this;return new t(function(t){var i=n.entries(),o=[],u=[],s=[],a=!1;if(e(i,function(e,n,i){var f=t.act(e,n);return f!==r.REPLACE&&f!==r.REMOVE||(a=!0,s[i]=e,o[i]=f,u[i]=t.replaceWith),f}),a){var f=0;n.each(function(t,e,n){switch(o[f]){case r.REMOVE:t===s[f]&&n.remove();break;case r.REPLACE:t===s[f]&&n.replace(u[f])}f++})}},this).onReset(this.handleReset)},t.prototype.sorted=function(t){var e=this;return this.viewResolved(function(n,u){var s,a,f=e.getComparator(t),c=n.map(function(t,e){var n=o(t,2);return{key:n[0],value:n[1],index:e}});c.sort(function(t,e){return f(t.value,e.value)});try{for(var h=i(c),l=h.next();!l.done;l=h.next()){var p=l.value,d=p.key;if(u(p.value,d,p.index)===r.STOP)return}}catch(t){s={error:t}}finally{try{l&&!l.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}})},t.prototype.shuffle=function(t){void 0===t&&(t=1);var e=function(t,e,n){var r=t[e];t[e]=t[n],t[n]=r};return this.viewResolved(function(n,i){for(var u=[],s=n.length,a=0;a<s;a++)u.push(a);for(var f=0;f<t;f++)for(var c=0;c<s;c++){var h=Math.floor(Math.random()*s);e(n,h,c),e(u,h,c)}for(a=0;a<s;a++){var l=o(n[a],2),p=l[0];if(i(l[1],p,u[a])===r.STOP)return}})},t.prototype.reverse=function(){return this.viewResolved(function(t,e){for(var n=t.length-1;n>=0;n--){var i=o(t[n],2),u=i[0];if(e(i[1],u,n)===r.STOP)return}})},t.prototype.transform=function(e,n){var i=this;return void 0===n&&(n=null),new t(function(t){i.each(function(i,o,u){var s=e(i,o,u);if(void 0!==s)switch(t.act(s,o)){case r.STOP:u.stop();break;case r.REMOVE:u.remove();break;case r.REPLACE:n&&u.replace(n(t.replaceWith,s,i,o))}})}).onReset(this.handleReset)},t.prototype.each=function(t){return this.result=void 0,this.callback=t,this.action=r.CONTINUE,this.source(this),this.callback=null,this},t.prototype.withResult=function(t){return this.result&&t(this.result),this},t.prototype[Symbol.iterator]=function(){return this.array().values()},t.entries=function(e){return void 0===e&&(e=[]),new t(function(t){for(var n=0;n<e.length;n++){var i=o(e[n],2),u=i[0],s=i[1];switch(t.act(s,u)){case r.STOP:return;case r.REMOVE:e.splice(n,1),n--;break;case r.REPLACE:e.splice(n,1,[u,t.replaceWith])}}}).onReset(function(t){return e=t})},t.array=function(e){return void 0===e&&(e=[]),new t(function(t){for(var n=0;n<e.length;n++)switch(t.act(e[n],n)){case r.STOP:return;case r.REMOVE:e.splice(n,1),n--;break;case r.REPLACE:e.splice(n,1,t.replaceWith)}}).onReset(function(t){return e=t})},t.zip=function(e,n){var i=c(e),u=c(n);return new t(function(t){var e=i.array(),n=[],o=0;if(u.each(function(i,u,s){if(o>=e.length)s.stop();else switch(t.act(i,e[o])){case r.STOP:return;case r.REMOVE:s.remove(),n.push(o);break;case r.REPLACE:s.replace(t.replaceWith)}o++}),n.length>0){var s=0;i.each(function(t,e,r){s===n[0]?(r.remove(),n.shift()):0===n.length&&r.stop(),s++})}}).onReset(function(t){var e=o(t,2),n=e[0],r=e[1];i=c(n),u=c(r)})},t.hasEntries=function(e,n,i){return new t(function(t){for(var u=e.entries(),s=u.next();!s.done;s=u.next()){var a=o(s.value,2),f=a[0],c=a[1];switch(t.act(c,f)){case r.STOP:return;case r.REMOVE:n&&n(e,f,c);break;case r.REPLACE:i&&i(e,f,c,t.replaceWith)}}}).onReset(function(t){return e=t})},t.map=function(e){return void 0===e&&(e=new Map),t.hasEntries(e,function(t,e){return t.delete(e)},function(t,e,n,r){return t.set(e,r)})},t.set=function(e){return void 0===e&&(e=new Set),t.hasEntries(e,function(t,e){return t.delete(e)},function(t,n,r,i){return e.delete(r)&&e.add(i)})},t.iterable=function(e){return new t(function(t){for(var n=e[Symbol.iterator](),i=0,o=n.next();!o.done&&t.act(o.value,i)!==r.STOP;o=n.next(),i++);}).onReset(function(t){return e=t})},t.object=function(e,n){return void 0===n&&(n=!0),new t(function(t){for(var i in e)if(!n||e.hasOwnProperty(i))switch(t.act(e[i],i)){case r.STOP:return;case r.REMOVE:delete e[i];break;case r.REPLACE:e[i]=t.replaceWith}}).onReset(function(t){return e=t})},t.linked=function(e,n,i,o,u){return u||(u=function(t){return e(t)}),function(s,a){return void 0===a&&(a=!0),new t(function(t){for(var f=s,c=n(s);c&&c!==s;){var h=n(c),l=!1;switch(t.act(e(c),u(c))){case r.STOP:return;case r.REMOVE:if(i)i(c,f),l=!0;else if(a)throw new Error("remove is required for linked list iteration");break;case r.REPLACE:if(o)o(c,t.replaceWith);else if(a)throw new Error("replace is required for linked list iteration")}l||(f=c),c=h}}).onReset(function(t){return s=t})}},t.tree=function(e,n,i,o){o||(o=function(t){return e(t)});var u=t.empty(),s=function(e){var r=n(e);return r?Array.isArray(r)?t.array(r):r:u},a=function(t,n,u,s,a){switch(n.act(e(t),o(t))){case r.STOP:return a&&a.stop(),!1;case r.REPLACE:if(i)i(t,n.replaceWith);else if(u)throw new Error("replaceValue is required when replacing a value in a tree");break;case r.REMOVE:if(a)a.remove();else if(u&&s)throw new Error("remove is not supported for breadth-first iteration")}return!0},f=function(t,e,n,r){return!!a(t,e,n,!1,r)&&!s(t).each(function(t,r,i){return f(t,e,n,i)}).isStopped()};return function(e,n,r){return void 0===n&&(n=!0),void 0===r&&(r=!0),new t(function(t){return n?f(e,t,r):function(t,e,n){var r=[];for(r.push(t);r.length>0;){var i=r.shift();if(!a(i,e,n,!0))break;s(i).array(r)}}(e,t,r)}).onReset(function(t){return e=t})}},t.join=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new t(function(t){var n,o,u=e.map(c);try{for(var s=i(u),a=s.next();!a.done;a=s.next()){var f=a.value;if(f.each(function(e,n,i){switch(t.act(e,n)){case r.REMOVE:i.remove();break;case r.STOP:i.stop();break;case r.REPLACE:i.replace(t.replaceWith)}}),f.action===r.STOP)return}}catch(t){n={error:t}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}})},t.empty=function(){return new t(function(t){})},t.func=function(t){return function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i,o=c(e);return t.apply(void 0,u([o,function(t){return i=t}],n)),i}},t}(),a=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},f=[function(t){return t instanceof s&&t},function(t){return!!Array.isArray(t)&&s.array(t)},function(t){return t instanceof Set&&s.set(t)},function(t){return t instanceof Map&&s.map(t)},function(t){return!(!t||!t[Symbol.iterator])&&s.iterable(t)},function(t){return!(!t||!t.entries)&&s.hasEntries(t)},function(t){return null==t&&s.empty()},function(t){return"object"==typeof t&&s.object(t)},function(t){return s.array([t])}];function c(t){var e,n;try{for(var r=a(f),i=r.next();!i.done;i=r.next()){var o=(0,i.value)(t);if(!1!==o)return o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}function h(t){return"function"==typeof t}function l(t,e,n,r,i,o){var u=!i(n),s=!i(r);return u!==s?(e?u:s)?-1:1:u?0:t?o(n,r):o(r,n)}function p(t,e,n,r){var i=!n(t);return i===!n(e)&&(!!i||r(t,e))}function d(t,e,n){void 0===n&&(n=!1);var r=null==t;if(r!==(null==e))return r?1:-1;if(r)return 0;var i=typeof t;if(i!==typeof e){if(n)return-1;throw new Error("You must implement your own comparator for unknown or mixed values.")}if("string"===i)return t.localeCompare(e);if("number"===i)return t-e;if("boolean"===i)return(t?1:0)-(e?1:0);if(t instanceof Date&&e instanceof Date)return t.getTime()-e.getTime();if(!n)throw new Error("You must implement your own comparator for unknown or mixed values.");if(t instanceof Array){if(0!=(s=t.length-e.length))return s;for(var o=0;o<t.length;o++)if(0!==(s=d(t[o],e[o],n)))return s;return 0}if("object"===i){for(var u in t)if(!(u in e))return-1;for(var u in e){if(!(u in t))return-1;var s;if(0!==(s=d(t[u],e[u],n)))return s}}return 0}function y(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1);var n=function(t){return"number"==typeof t&&isFinite(t)},r=function(t,e){return t-e};return function(i,o){return l(t,e,i,o,n,r)}}function v(t,e,n){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!1);var r=function(t){return"string"==typeof t},i=t?function(t,e){return t.localeCompare(e)}:function(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())};return function(t,o){return l(e,n,t,o,r,i)}}function m(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1);var n=function(t){return t instanceof Date},r=function(t,e){return t.getTime()-e.getTime()};return function(i,o){return l(t,e,i,o,n,r)}}function O(t,e){void 0===t&&(t=1),void 0===e&&(e=!0);var n=function(t){return t instanceof Date},r=e?function(t){return t.getTime()}:function(t){return t.getTime()+6e4*t.getTimezoneOffset()},i=function(e,n){return r(e)%t==r(n)%t};return function(t,e){return p(t,e,n,i)}}n.d(e,"Generators",function(){return f}),n.d(e,"iterate",function(){return c}),n.d(e,"isFunction",function(){return h}),n.d(e,"compare",function(){return l}),n.d(e,"equals",function(){return p}),n.d(e,"defaultCompare",function(){return d}),n.d(e,"getNumberComparator",function(){return y}),n.d(e,"getStringComparator",function(){return v}),n.d(e,"getDateComparator",function(){return m}),n.d(e,"getDateEquality",function(){return O}),n.d(e,"IterateAction",function(){return r}),n.d(e,"Iterate",function(){return s}),e.default=c}])},function(t,e,n){"use strict";n.r(e);var r=n(0),i=function(){function t(){}return t.MILLIS_IN_SECOND=1e3,t.SECONDS_IN_MINUTE=60,t.MINUTES_IN_HOUR=60,t.HOURS_IN_DAY=24,t.DAYS_IN_WEEK=7,t.DAYS_IN_YEAR=366,t.MILLIS_IN_MINUTE=t.MILLIS_IN_SECOND*t.SECONDS_IN_MINUTE,t.MILLIS_IN_HOUR=t.MILLIS_IN_MINUTE*t.SECONDS_IN_MINUTE,t.MILLIS_IN_DAY=t.MILLIS_IN_HOUR*t.HOURS_IN_DAY,t.MILLIS_IN_WEEK=t.MILLIS_IN_DAY*t.DAYS_IN_WEEK,t.MINUTES_IN_DAY=t.MINUTES_IN_HOUR*t.HOURS_IN_DAY,t.MONTHS_IN_QUARTER=3,t.MONTHS_IN_YEAR=12,t.MONTH_MIN=0,t.MONTH_MAX=11,t.DAY_MIN=1,t.DAY_MAX=31,t.HOUR_MIN=0,t.HOUR_MAX=23,t.MINUTE_MIN=0,t.MINUTE_MAX=59,t.SECOND_MIN=0,t.SECOND_MAX=59,t.MILLIS_MIN=0,t.MILLIS_MAX=999,t.WEEKDAY_MIN=0,t.WEEKDAY_MAX=6,t.DURATION_DEFAULT=1,t.DURATION_DEFAULT_UNIT_ALL="day",t.DURATION_DEFAULT_UNIT_TIMES="hour",t.DURATION_DEFAULT_UNIT=function(e){return e?t.DURATION_DEFAULT_UNIT_ALL:t.DURATION_DEFAULT_UNIT_TIMES},t.MAX_EVENTS_PER_DAY=24,t}(),o=function(){function t(){}return t.isArray=function(t){return t instanceof Array},t.isArrayEquals=function(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},t.isString=function(t){return"string"==typeof t},t.isNumber=function(t){return isFinite(t)&&"number"==typeof t},t.isObject=function(t){return null!==t&&!this.isArray(t)&&"object"==typeof t},t.isDefined=function(t){return void 0!==t},t.isValue=function(t){return null!=t},t.isFrequencyValueEvery=function(t){return this.isObject(t)&&this.isNumber(t.every)},t.isFrequencyValueOneOf=function(t){return this.isArray(t)&&t.length>0},t.isFrequencyValueEquals=function(t){return"number"==typeof t&&isFinite(t)},t.coalesce=function(t,e,n){return this.isDefined(t)?t:this.isDefined(e)?e:n},t.extend=function(t,e){for(var n in e)t[n]=e[n];return t},t.pad=function(t,e,n,r){for(;t.length<e;)r?t=n+t:t+=n;return t},t.padNumber=function(t,e,n){return void 0===n&&(n=e),this.pad(t+"",e,"0",!0).substring(0,n)},t}(),u=function(){function t(t,e){void 0===e&&(e={}),this.cached={},this.sections=[],this.add(t),this.escapes=e}return t.prototype.add=function(t,e){if(o.isString(t))this.getSection(t.length).formats[t]=e;else for(var n in t)this.getSection(n.length).formats[n]=t[n];return this},t.prototype.getSection=function(t){var e=this.sections.length-t,n=this.sections[e];if(n&&n.size===t)return n;for(var r=0,i=this.sections;r<i.length;r++){var o=i[r];if(o.size===t)return o}var u={size:t,formats:{}};return this.sections.push(u),this.sortBySize(),u},t.prototype.sortBySize=function(){this.sections.sort(function(t,e){return e.size-t.size})},t.prototype.getEscaped=function(t,e){var n=t.charAt(e),r=this.escapes[n];if(!r)return!1;var i=r.start,o=r.end,u=r.startEscape,s=r.endEscape;if(t.substring(e,e+i.length)!==i)return!1;var a=e-u.indexOf(i);if(t.substring(a,a+u.length)===u)return!1;e+=i.length;var f=s.indexOf(o),c=t.indexOf(o,e),h=t.substring(e,c);for(e=c-f;-1!==c&&t.substring(e,e+s.length)===s;)h=h.substring(0,h.length-f),h+=o,e+=s.length,c=t.indexOf(o,e),h+=t.substring(e,c),e=c-f;return-1!==c&&[h,c+o.length]},t.prototype.getFormatter=function(t,e){if(void 0===e&&(e=!1),t in this.cached)return this.cached[t];for(var n,r=this.sections,i=[],o="",u=function(e){var u=s.getEscaped(t,e);if(!1!==u){var a=u[0],f=u[1];return o+=a,n=e=f-1,"continue"}for(var c=!1,h=0;h<r.length&&!c;h++){var l=r[h],p=t.substring(e,e+l.size);if(p.length===l.size){var d=l.formats[p];d&&(i.push(d),e+=l.size-1,c=!0)}}if(c){if(o){var y=o;i.splice(i.length-1,0,function(){return y}),o=""}}else o+=t.charAt(e);n=e},s=this,a=0;a<t.length;a++)u(a),a=n;o&&i.push(function(){return o});var f=function(t){for(var e="",n=0,r=i;n<r.length;n++){e+=(0,r[n])(t)}return e};return e&&(this.cached[t]=f),f},t.prototype.format=function(t,e,n){return void 0===n&&(n=!1),this.getFormatter(t,n)(e)},t}(),s=new u({M:function(t){return t[0].month+1+""},Mo:function(t){var e=t[0];return t[1].suffix(e.month+1)},MM:function(t){var e=t[0];return o.padNumber(e.month+1,2)},MMm:function(t){var e=t[0];return t[1].months[3][e.month]},MMM:function(t){var e=t[0];return t[1].months[2][e.month]},MMMm:function(t){var e=t[0];return t[1].months[1][e.month]},MMMM:function(t){var e=t[0];return t[1].months[0][e.month]},Q:function(t){return t[0].quarter+1+""},Qo:function(t){var e=t[0];return t[1].suffix(e.quarter+1)},D:function(t){return t[0].dayOfMonth+""},Do:function(t){var e=t[0];return t[1].suffix(e.dayOfMonth)},DD:function(t){var e=t[0];return o.padNumber(e.dayOfMonth,2)},DDD:function(t){return t[0].dayOfYear+""},DDDo:function(t){var e=t[0];return t[1].suffix(e.dayOfYear)},DDDD:function(t){var e=t[0];return o.padNumber(e.dayOfYear,3)},d:function(t){return t[0].day+""},do:function(t){var e=t[0];return t[1].suffix(e.day)},dd:function(t){var e=t[0];return t[1].weekdays[3][e.day]},ddd:function(t){var e=t[0];return t[1].weekdays[2][e.day]},dddd:function(t){var e=t[0];return t[1].weekdays[0][e.day]},e:function(t){return t[0].dayOfWeek+""},E:function(t){return t[0].dayOfWeek+1+""},eo:function(t){var e=t[0];return t[1].suffix(e.dayOfWeek)},Eo:function(t){var e=t[0];return t[1].suffix(e.dayOfWeek+1)},w:function(t){return t[0].week+""},wo:function(t){var e=t[0];return t[1].suffix(e.week)},ww:function(t){var e=t[0];return o.padNumber(e.week,2)},W:function(t){return t[0].weekOfYear+""},Wo:function(t){var e=t[0];return t[1].suffix(e.weekOfYear)},WW:function(t){var e=t[0];return o.padNumber(e.weekOfYear,2)},Y:function(t){return t[0].year+""},YY:function(t){var e=t[0];return o.padNumber(e.year%100,2)},YYYY:function(t){var e=t[0];return o.padNumber(e.year,4,10)},gg:function(t){var e=t[0];return o.padNumber(e.year%100,2)},gggg:function(t){var e=t[0];return o.padNumber(e.year,4,10)},GG:function(t){var e=t[0];return o.padNumber(e.year%100,2)},GGGG:function(t){var e=t[0];return o.padNumber(e.year,4,10)},a:function(t){var e=t[0],n=t[1];return e.hour<12?n.am:n.pm},A:function(t){var e=t[0],n=t[1];return e.hour<12?n.am.toUpperCase():n.pm.toUpperCase()},H:function(t){return t[0].hour+""},HH:function(t){var e=t[0];return o.padNumber(e.hour,2)},h:function(t){return(t[0].hour%12||12)+""},hh:function(t){var e=t[0];return o.padNumber(e.hour%12||12,2)},k:function(t){return t[0].hour+1+""},kk:function(t){var e=t[0];return o.padNumber(e.hour+1,2)},m:function(t){return t[0].minute+""},mm:function(t){var e=t[0];return o.padNumber(e.minute,2)},s:function(t){return t[0].seconds+""},ss:function(t){var e=t[0];return o.padNumber(e.seconds,2)},S:function(t){var e=t[0];return o.padNumber(e.millis,3,1)},SS:function(t){var e=t[0];return o.padNumber(e.millis,3,2)},SSS:function(t){var e=t[0];return o.padNumber(e.millis,3)},SSSS:function(t){var e=t[0];return o.padNumber(e.millis,3)+"0"},SSSSS:function(t){var e=t[0];return o.padNumber(e.millis,3)+"00"},SSSSSS:function(t){var e=t[0];return o.padNumber(e.millis,3)+"000"},SSSSSSS:function(t){var e=t[0];return o.padNumber(e.millis,3)+"0000"},SSSSSSSS:function(t){var e=t[0];return o.padNumber(e.millis,3)+"00000"},SSSSSSSSS:function(t){var e=t[0];return o.padNumber(e.millis,3)+"000000"},z:function(t){return t[0].date.toLocaleTimeString("en-us",{timeZoneName:"short"}).split(" ")[2]},zz:function(t){return t[0].date.toLocaleTimeString("en-us",{timeZoneName:"long"}).split(" ")[2]},Z:function(t){return a(t[0],":")},ZZ:function(t){return a(t[0],"")},X:function(t){var e=t[0];return Math.floor(e.time/1e3)+""},x:function(t){return t[0].time+""},LT:function(t){var e=t[0],n=t[1];return e.format(n.formatLT,!0)},LTS:function(t){var e=t[0],n=t[1];return e.format(n.formatLTS,!0)},L:function(t){var e=t[0],n=t[1];return e.format(n.formatL,!0)},l:function(t){var e=t[0],n=t[1];return e.format(n.formatl,!0)},LL:function(t){var e=t[0],n=t[1];return e.format(n.formatLL,!0)},ll:function(t){var e=t[0],n=t[1];return e.format(n.formatll,!0)},LLL:function(t){var e=t[0],n=t[1];return e.format(n.formatLLL,!0)},lll:function(t){var e=t[0],n=t[1];return e.format(n.formatlll,!0)},LLLL:function(t){var e=t[0],n=t[1];return e.format(n.formatLLLL,!0)},llll:function(t){var e=t[0],n=t[1];return e.format(n.formatllll,!0)}},{"[":{start:"[",startEscape:"\\[",end:"]",endEscape:"\\]"},"'":{start:"'",startEscape:"''",end:"'",endEscape:"''"}});function a(t,e){var n=t.offset(),r=Math.floor(Math.abs(n)/100),i=Math.abs(n)%100;return(n<0?"-":"+")+o.padNumber(r,2)+e+o.padNumber(i,2)}var f=["th","st","nd","rd","th","th","th","th","th","th"],c={weekStartsOn:0,firstWeekContainsDate:4,am:"am",pm:"pm",formatLT:"h:mm A",formatLTS:"h:mm:ss A",formatL:"MM/DD/Y",formatl:"M/D/Y",formatLL:"MMMM D, Y",formatll:"MMM D, Y",formatLLL:"MMMM D, Y h:mm A",formatlll:"MMM D, Y h:mm A",formatLLLL:"dddd, MMMM D, Y h:mm A",formatllll:"ddd, MMM D, Y h:mm A",suffix:function(t){return t+(t>=11&&t<=13?"th":f[t%f.length])},identifierTime:function(t){return t?"lll":"LLL"},identifierDay:function(t){return t?"ll":"LL"},identifierWeek:function(t){return"wo [week of] Y"},identifierMonth:function(t){return t?"MMM Y":"MMMM Y"},identifierQuarter:function(t){return"Qo [quarter] Y"},identifierYear:function(t){return"Y"},patternNone:function(t){return"Does not repeat"},patternDaily:function(t){return"Daily"},patternWeekly:function(t){return"Weekly on "+t.format("dddd")},patternMonthlyWeek:function(t){return"Monthly on the "+c.suffix(t.weekspanOfMonth+1)+" "+t.format("dddd")},patternAnnually:function(t){return"Annually on "+t.format("MMMM Do")},patternAnnuallyMonthWeek:function(t){return"Annually on the "+c.suffix(t.weekspanOfMonth+1)+" "+t.format("dddd")+" of "+t.format("MMMM")},patternWeekday:function(t){return"Every weekday (Monday to Friday)"},patternMonthly:function(t){return"Monthly on the "+t.format("Do")+" day"},patternLastDay:function(t){return"Last day of the month"},patternLastDayOfMonth:function(t){return"Last day of "+t.format("MMMM")},patternLastWeekday:function(t){return"Last "+t.format("dddd")+" in "+t.format("MMMM")},patternCustom:function(t){return"Custom..."},scheduleStartingOn:function(t){return"Starting on "+t.format("MMMM Do, YYYY")},scheduleEndingOn:function(t){return" and ending on "+t.format("MMMM Do, YYYY")},scheduleEndsOn:function(t){return"Up until "+t.format("MMMM Do, YYYY")},scheduleThing:function(t,e){return e?"The "+t+" will occur":" the "+t+" will occur"},scheduleAtTimes:" at ",scheduleDuration:function(t,e){return" lasting "+t+" "+(e?e+(1!==t?"s":"")+" ":"")},scheduleExcludes:" excluding ",scheduleIncludes:" including ",scheduleCancels:" with cancellations on ",ruleDayOfWeek:{every:function(t){return"every "+c.suffix(t)+" day of the week"},offset:function(t){return"starting on the "+c.suffix(t)+" day of the week"},oneOf:function(t){return"on the "+c.list(t.map(c.suffix))+" day of the week"}},ruleLastDayOfMonth:{every:function(t){return"every "+c.suffix(t)+" last day of the month"},offset:function(t){return"starting on the "+c.suffix(t)+" last day of the month"},oneOf:function(t){return"on the "+c.list(t.map(c.suffix))+" last day of the month"}},ruleDayOfMonth:{every:function(t){return"every "+c.suffix(t)+" day of the month"},offset:function(t){return"starting on the "+c.suffix(t)+" day of the month"},oneOf:function(t){return"on the "+c.list(t.map(c.suffix))+" day of the month"}},ruleDayOfYear:{every:function(t){return"every "+c.suffix(t)+" day of the year"},offset:function(t){return"starting on the "+c.suffix(t+1)+" day of the year"},oneOf:function(t){return"on the "+c.list(t.map(c.suffix))+" day of the year"}},ruleYear:{every:function(t){return"every "+c.suffix(t)+" year"},offset:function(t){return"starting in "+t},oneOf:function(t){return"in "+c.list(t.map(function(t){return t.toString()}))}},ruleMonth:{every:function(t){return"every "+c.suffix(t)+" month"},offset:function(t){return"starting in "+c.months[0][t]},oneOf:function(t){return"in "+c.list(t.map(function(t){return c.months[0][t]}))}},ruleDay:{every:function(t){return"every "+c.suffix(t)+" day of the week"},offset:function(t){return"starting on "+c.weekdays[0][t]},oneOf:function(t){return"on "+c.list(t.map(function(t){return c.weekdays[0][t]}))}},ruleWeek:{every:function(t){return"every "+c.suffix(t)+" week of the year"},offset:function(t){return"starting on the "+c.suffix(t)+" week of the year"},oneOf:function(t){return"on the "+c.list(t.map(c.suffix))+" week of the year"}},ruleWeekOfYear:{every:function(t){return"every "+c.suffix(t)+" week of the year"},offset:function(t){return"starting on the "+c.suffix(t)+" week of the year"},oneOf:function(t){return"on the "+c.list(t.map(c.suffix))+" week of the year"}},ruleWeekspanOfYear:{every:function(t){return"every "+c.suffix(t+1)+" weekspan of the year"},offset:function(t){return"starting on the "+c.suffix(t+1)+" weekspan of the year"},oneOf:function(t){return"on the "+c.list(t.map(function(t){return c.suffix(t+1)}))+" weekspan of the year"}},ruleFullWeekOfYear:{every:function(t){return"every "+c.suffix(t)+" full week of the year"},offset:function(t){return"starting on the "+c.suffix(t)+" full week of the year"},oneOf:function(t){return"on the "+c.list(t.map(c.suffix))+" full week of the year"}},ruleLastWeekspanOfYear:{every:function(t){return"every "+c.suffix(t+1)+" last weekspan of the year"},offset:function(t){return"starting on the "+c.suffix(t+1)+" last weekspan of the year"},oneOf:function(t){return"on the "+c.list(t.map(function(t){return c.suffix(t+1)}))+" last weekspan of the year"}},ruleLastFullWeekOfYear:{every:function(t){return"every "+c.suffix(t)+" last full week of the year"},offset:function(t){return"starting on the "+c.suffix(t)+" last full week of the year"},oneOf:function(t){return"on the "+c.list(t.map(c.suffix))+" last full week of the year"}},ruleWeekOfMonth:{every:function(t){return"every "+c.suffix(t)+" week of the month"},offset:function(t){return"starting on the "+c.suffix(t)+" week of the month"},oneOf:function(t){return"on the "+c.list(t.map(c.suffix))+" week of the month"}},ruleFullWeekOfMonth:{every:function(t){return"every "+c.suffix(t)+" full week of the month"},offset:function(t){return"starting on the "+c.suffix(t)+" full week of the month"},oneOf:function(t){return"on the "+c.list(t.map(c.suffix))+" full week of the month"}},ruleWeekspanOfMonth:{every:function(t){return"every "+c.suffix(t+1)+" weekspan of the month"},offset:function(t){return"starting on the "+c.suffix(t+1)+" weekspan of the month"},oneOf:function(t){return"on the "+c.list(t.map(function(t){return c.suffix(t+1)}))+" weekspan of the month"}},ruleLastFullWeekOfMonth:{every:function(t){return"every "+c.suffix(t)+" last full week of the month"},offset:function(t){return"starting on the "+c.suffix(t)+" last full week of the month"},oneOf:function(t){return"on the "+c.list(t.map(c.suffix))+" last full week of the month"}},ruleLastWeekspanOfMonth:{every:function(t){return"every "+c.suffix(t+1)+" last weekspan of the month"},offset:function(t){return"starting on the "+c.suffix(t+1)+" last weekspan of the month"},oneOf:function(t){return"on the "+c.list(t.map(function(t){return c.suffix(t+1)}))+" last weekspan of the month"}},summaryDay:function(t,e,n){return(e?t?"ddd, ":"dddd, ":"")+(t?"MMM ":"MMMM ")+"Do"+(n?" YYYY":"")},summaryWeek:function(t,e,n){return(e?t?"ddd, ":"dddd, ":"")+(t?"MMM ":"MMMM ")+"Do"+(n?" YYYY":"")},summaryMonth:function(t,e,n){return(t?"MMM":"MMMM")+(n?" YYYY":"")},summaryYear:function(t,e,n){return n?"YYYY":""},list:function(t){for(var e=t.length-1,n=t[0],r=1;r<e;r++)n+=", "+t[r];return e>0&&(n+=" and "+t[e]),n},months:[["January","February","March","April","May","June","July","August","September","Octoboer","November","December"],["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["Ja","F","Mr","Ap","My","Je","Jl","Ag","S","O","N","D"]],weekdays:[["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Sun","Mon","Tues","Wed","Thurs","Fri","Sat"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Su","M","Tu","W","Th","F","Sa"]]},h=c,l=function(){function t(t,e){this.value=t,this.shared=e,this.dirty=!1}return t.prototype.getUpdate=function(e){return this.shared?new t(e,!1):(this.value=e,this)},t.prototype.getReplace=function(e){return this.shared?(this.dirty=!0,new t(e,!0)):(this.value=e,this)},t}(),p=function(){function t(){}return t.add=function(t,e){for(var n=0,r=o.isArray(t)?t:[t];n<r.length;n++){var i=r[n];this.map[this.normal(i)]=e}},t.alias=function(t,e){for(var n=this.map[this.normal(t)],r=0,i=e;r<i.length;r++){var o=i[r];this.map[this.normal(o)]=n}},t.set=function(t){var e=this.normal(t),n=e in this.map;return n&&(this.ref=this.ref.getReplace(this.map[e])),n},t.normal=function(t){return t.toLowerCase()},t.get=function(t){var e=this.normal(t);return e in this.map?this.map[e]:this.current},Object.defineProperty(t,"current",{get:function(){return this.ref.value},enumerable:!0,configurable:!0}),t.map={en:h},t.ref=new l(h,!0),t}(),d=function(){function t(){}return t.SUNDAY=0,t.MONDAY=1,t.TUESDAY=2,t.WEDNESDAY=3,t.THURSDAY=4,t.FRIDAY=5,t.SATURDAY=6,t.LIST=[t.SUNDAY,t.MONDAY,t.TUESDAY,t.WEDNESDAY,t.THURSDAY,t.FRIDAY,t.SATURDAY],t.WEEK=[t.MONDAY,t.TUESDAY,t.WEDNESDAY,t.THURSDAY,t.FRIDAY],t.ENDS=[t.SATURDAY,t.SUNDAY],t}(),y={millis:function(t){return t},second:function(t){t.setMilliseconds(0)},minute:function(t){t.setSeconds(0,0)},hour:function(t){t.setMinutes(0,0,0)},day:X,week:function(t,e){void 0===e&&(e=p.current);var n=F(t,e);t.setDate(t.getDate()-n),t.setHours(0,0,0,0)},month:K,quarter:function(t){var e=t.getMonth();t.setMonth(e-e%i.MONTHS_IN_QUARTER,i.DAY_MIN),t.setHours(0,0,0,0)},year:G},v={millis:function(t){return t},second:function(t){t.setMilliseconds(i.MILLIS_MAX)},minute:function(t){t.setSeconds(i.SECOND_MAX,i.MILLIS_MAX)},hour:function(t){t.setMinutes(i.MINUTE_MAX,i.SECOND_MAX,i.MILLIS_MAX)},day:J,week:function(t,e){void 0===e&&(e=p.current);var n=F(t,e);t.setDate(t.getDate()+(i.WEEKDAY_MAX-n)),J(t)},month:function(t){t.setFullYear(t.getFullYear(),t.getMonth()+1,0),J(t)},quarter:function(t){var e=t.getMonth();t.setMonth(e-e%i.MONTHS_IN_QUARTER+i.MONTHS_IN_QUARTER,i.DAY_MIN),J(t)},year:Q},m={millis:Z,second:function(t,e){Z(t,e*i.MILLIS_IN_SECOND)},minute:function(t,e){Z(t,e*i.MILLIS_IN_MINUTE)},hour:function(t,e){Z(t,e*i.MILLIS_IN_HOUR)},day:$,week:function(t,e){$(t,e*i.DAYS_IN_WEEK)},month:tt,quarter:function(t,e){tt(t,e*i.MONTHS_IN_QUARTER)},year:function(t,e){tt(t,e*i.MONTHS_IN_YEAR)}},O={millis:et,second:function(t,e){return et(t,e)/i.MILLIS_IN_SECOND},minute:function(t,e){return et(t,e)/i.MILLIS_IN_MINUTE},hour:function(t,e){return et(t,e)/i.MILLIS_IN_HOUR},day:nt,week:function(t,e){return nt(t,e)/i.DAYS_IN_WEEK},month:rt,quarter:function(t,e){return rt(t,e)/i.MONTHS_IN_QUARTER},year:function(t,e){return rt(t,e)/i.MONTHS_IN_YEAR}},M={millis:1,second:i.MILLIS_IN_SECOND,minute:i.MILLIS_IN_MINUTE,hour:i.MILLIS_IN_HOUR,day:i.MILLIS_IN_DAY,week:i.MILLIS_IN_WEEK,month:i.MILLIS_IN_DAY*i.DAY_MAX,quarter:i.MILLIS_IN_DAY*i.DAY_MAX*i.MONTHS_IN_QUARTER,year:i.MILLIS_IN_DAY*i.DAYS_IN_YEAR};function g(t,e,n){var r=new Date(t.getTime());return e(r,n),r}function S(t,e,n,r){void 0===n&&(n="millis"),void 0===r&&(r=p.current);var i=y[n],o=g(t,i,r),u=g(e,i,r);return o.getTime()-u.getTime()}function E(t){return V(t)-t.getDate()+1}function w(t){var e=P(t)-U(t);return Math.floor(e/i.DAYS_IN_WEEK)}function D(t,e){return void 0===e&&(e=p.current),L(g(t,G),U(t),e)}function k(t,e){return void 0===e&&(e=p.current),R(g(t,G),U(t),e)}function I(t){return Math.floor((U(t)-1)/i.DAYS_IN_WEEK)}function _(t,e){return void 0===e&&(e=p.current),x(g(t,G),P(t),e)}function Y(t,e){void 0===e&&(e=p.current);var n=g(t,Q),r=D(t,e),o=D(n,e)-r;return F(n,e)===i.WEEKDAY_MAX?o+1:o}function N(t){return Math.floor((t.getDate()-1)/i.DAYS_IN_WEEK)}function b(t){var e=V(t)-t.getDate();return Math.floor(e/i.DAYS_IN_WEEK)}function A(t,e){return void 0===e&&(e=p.current),x(g(t,K),t.getDate(),e)}function T(t,e){void 0===e&&(e=p.current);var n=V(t)-t.getDate(),r=i.WEEKDAY_MAX-F(t,e);return Math.floor((n-r+i.DAYS_IN_WEEK)/i.DAYS_IN_WEEK)}function W(t,e){return void 0===e&&(e=p.current),L(g(t,K),t.getDate(),e)}function L(t,e,n){void 0===n&&(n=p.current);var r=n.firstWeekContainsDate,o=F(t,n),u=i.DAYS_IN_WEEK-o<r?o-1:o-1+i.DAYS_IN_WEEK;return Math.floor((e+u)/i.DAYS_IN_WEEK)}function R(t,e,n){var r=F(t,n)-1+i.DAYS_IN_WEEK;return Math.floor((e+r)/i.DAYS_IN_WEEK)}function x(t,e,n){void 0===n&&(n=p.current);var r=F(t,n),o=r!==d.SUNDAY?r-1:r-1+i.DAYS_IN_WEEK;return Math.floor((e+o)/i.DAYS_IN_WEEK)}function F(t,e){void 0===e&&(e=p.current);var n=e.weekStartsOn,r=t.getDay();return r<n?r-n+i.DAYS_IN_WEEK:r-n}function U(t){return Math.round(nt(t,g(t,G)))+1}function C(t){return 15*-Math.round(t.getTimezoneOffset()/15)}function q(t){var e=t.getFullYear();return e%400==0||e%4==0&&e%100!=0}function P(t){return q(t)?366:365}var j,H=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]];function V(t){return H[q(t)?1:0][t.getMonth()]}function B(t){return t.getTime()-function(t){var e=new Date(t.getTime()),n=e.getTimezoneOffset();e.setSeconds(0,0);var r=e.getTime()%i.MILLIS_IN_MINUTE;return n*i.MILLIS_IN_MINUTE+r}(t)}function z(t){return Math.floor(t.getMonth()/i.MONTHS_IN_QUARTER)}function X(t){t.setHours(0,0,0,0)}function K(t){t.setDate(i.DAY_MIN),t.setHours(0,0,0,0)}function G(t){var e=t.getFullYear();t.setTime(0),t.setFullYear(e,0,1),t.setHours(0,0,0,0)}function J(t){t.setHours(i.HOUR_MAX,i.MINUTE_MAX,i.SECOND_MAX,i.MILLIS_MAX)}function Q(t){t.setFullYear(t.getFullYear()+1,0,0),J(t)}function Z(t,e){t.setTime(t.getTime()+e)}function $(t,e){t.setDate(t.getDate()+e)}function tt(t,e){var n=t.getMonth()+e,r=new Date(0);r.setFullYear(r.getFullYear(),n,1),r.setHours(0,0,0,0);var i=V(r);t.setMonth(n,Math.min(i,t.getDate()))}function et(t,e){return t.getTime()-e.getTime()}function nt(t,e){var n=g(t,X),r=g(e,X);return(B(n)-B(r))/i.MILLIS_IN_DAY}function rt(t,e){var n=t.getFullYear()-e.getFullYear(),r=t.getMonth()-e.getMonth(),o=(t.getDate()-e.getDate())/i.DAY_MAX;return n*i.MONTHS_IN_YEAR+r+o}function it(t,e,n){if(void 0===n&&(n=!1),isFinite(t))switch(n&&(t=Math.abs(t)),e){case j.NONE:return t;case j.FLOOR:return Math.floor(t);case j.CEIL:return Math.ceil(t);case j.ROUND:return Math.round(t);case j.TRUNCATE:case j.DOWN:return t<0?Math.ceil(t):Math.floor(t);case j.UP:return t<0?Math.floor(t):Math.ceil(t)}return t}!function(t){t[t.NONE=0]="NONE",t[t.FLOOR=1]="FLOOR",t[t.CEIL=2]="CEIL",t[t.ROUND=3]="ROUND",t[t.TRUNCATE=4]="TRUNCATE",t[t.UP=5]="UP",t[t.DOWN=6]="DOWN"}(j||(j={}));var ot,ut=function(){function t(t,e){this.start=t,this.end=e}return Object.defineProperty(t.prototype,"isPoint",{get:function(){return this.start.time===this.end.time},enumerable:!0,configurable:!0}),t.prototype.contains=function(t){return t.time>=this.start.time&&t.time<=this.end.time},t.prototype.compareTo=function(t){return t.time<this.start.time?-1:t.time>this.end.time?1:0},t.prototype.matchesDay=function(t){return this.contains(t)||t.sameDay(this.start)||t.sameDay(this.end)},t.prototype.matchesWeek=function(t){return this.contains(t)||t.sameWeek(this.start)||t.sameWeek(this.end)},t.prototype.matchesMonth=function(t){return this.contains(t)||t.sameMonth(this.start)||t.sameMonth(this.end)},t.prototype.matchesYear=function(t){return this.contains(t)||t.sameYear(this.start)||t.sameYear(this.end)},t.prototype.millis=function(t,e){return void 0===t&&(t=j.DOWN),void 0===e&&(e=!0),this.start.millisBetween(this.end,t,e)},t.prototype.seconds=function(t,e){return void 0===t&&(t=j.DOWN),void 0===e&&(e=!0),this.start.secondsBetween(this.end,t,e)},t.prototype.minutes=function(t,e){return void 0===t&&(t=j.DOWN),void 0===e&&(e=!0),this.start.minutesBetween(this.end,t,e)},t.prototype.hours=function(t,e){return void 0===t&&(t=j.DOWN),void 0===e&&(e=!0),this.start.hoursBetween(this.end,t,e)},t.prototype.days=function(t,e){return void 0===t&&(t=j.DOWN),void 0===e&&(e=!0),this.start.daysBetween(this.end,t,e)},t.prototype.weeks=function(t,e){return void 0===t&&(t=j.DOWN),void 0===e&&(e=!0),this.start.weeksBetween(this.end,t,e)},t.prototype.months=function(t,e){return void 0===t&&(t=j.DOWN),void 0===e&&(e=!0),this.start.monthsBetween(this.end,t,e)},t.prototype.years=function(t,e){return void 0===t&&(t=j.DOWN),void 0===e&&(e=!0),this.start.yearsBetween(this.end,t,e)},t.prototype.startDelta=function(t){return(this.start.time-t.time)/i.MILLIS_IN_DAY},t.prototype.endDelta=function(t){return(this.end.time-t.time)/i.MILLIS_IN_DAY},t.prototype.getBounds=function(t,e,n,r,i,o,u){void 0===e&&(e=1),void 0===n&&(n=1),void 0===r&&(r=0),void 0===i&&(i=!0),void 0===o&&(o=0),void 0===u&&(u=0);var s=this.startDelta(t),a=this.endDelta(t),f=n-r,c=(i?Math.max(0,s):s)*e,h=(i?Math.min(1,a):a)*e;return{top:c+u,bottom:h+u,height:h-c,left:r+o,right:f+o,width:f}},t.prototype.summary=function(t,e,n,r,i,o){void 0===e&&(e=!0),void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i=!0),void 0===o&&(o=" - ");var u=[p.current.summaryDay,p.current.summaryWeek,p.current.summaryMonth,p.current.summaryYear][t],s=wt.today(),a=!i||!this.start.sameYear(s),f=!i||!this.end.sameYear(s),c=this.start.format(u(n,e,a)),h=this.end.format(u(n,e,f)),l=c;return c!==h?(r||(l=this.start.format(u(n,e,!this.start.sameYear(this.end)))),l+=o,l+=h):l=c,l},t.prototype.intersects=function(t){return!(this.end.time<t.start.time||this.start.time>t.end.time)},t.prototype.intersection=function(e){var n=this.start.max(e.start),r=this.end.min(e.end);return n.isAfter(r)?null:new t(n,r)},t.prototype.union=function(e){return new t(this.start.min(e.start),this.end.max(e.end))},t.point=function(e){return new t(e,e)},t}(),st=(ot=function(t,e){return(ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ot(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),at=function(){function t(){}return t.prototype.is=function(t){return(t+"").length===this.getLength()},t.prototype.compute=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this.getScales(),r=0,i=0;i<t.length;i++)r+=t[i]*n[i];return this.is(r)?r:o.padNumber(r,this.getLength())},t.prototype.decompute=function(t){for(var e=this.getScales(),n=o.isNumber(t)?t:parseInt(t),r=[],i=0;i<e.length-1;i++){var u=e[i+0],s=e[i+1]/u,a=n%s;r.push(a),n=Math.floor(n/s)}return r.push(n),r},t.find=function(t){return this.Time.is(t)?this.Time:this.Day.is(t)?this.Day:this.Week.is(t)?this.Week:this.Month.is(t)?this.Month:this.Year.is(t)?this.Year:null},t.contains=function(t,e){var n=t+"";return(e+"").substring(0,n.length)===n},t.Time=null,t.Day=null,t.Week=null,t.Month=null,t.Quarter=null,t.Year=null,t}(),ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return st(e,t),e.prototype.getScales=function(){return e.SCALES},e.prototype.getLength=function(){return e.LENGTH},e.prototype.get=function(t){return this.compute(t.minute,t.hour,t.dayOfMonth,t.month+1,t.year)},e.prototype.object=function(t){var e=this.decompute(t);return{minute:e[0],hour:e[1],day:e[2],month:e[3]-1,year:e[4]}},e.prototype.start=function(t){var e=this.object(t);return wt.build(e.year,e.month,e.day,e.hour,e.minute)},e.prototype.span=function(t,e){void 0===e&&(e=!1);var n=this.start(t),r=n.endOfHour(e);return new ut(n,r)},e.prototype.describe=function(t,e){void 0===e&&(e=!1);var n=this.start(t),r=p.current.identifierTime(e);return n.format(r)},e.prototype.matches=function(t,e){return t.timeIdentifier===e},e.SCALES=[1,100,1e4,1e6,1e8],e.LENGTH=12,e}(at),ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return st(e,t),e.prototype.getScales=function(){return e.SCALES},e.prototype.getLength=function(){return e.LENGTH},e.prototype.get=function(t){return this.compute(t.dayOfMonth,t.month+1,t.year)},e.prototype.object=function(t){var e=this.decompute(t);return{day:e[0],month:e[1]-1,year:e[2]}},e.prototype.start=function(t){var e=this.object(t);return wt.build(e.year,e.month,e.day)},e.prototype.span=function(t,e){void 0===e&&(e=!1);var n=this.start(t),r=n.end(e);return new ut(n,r)},e.prototype.describe=function(t,e){void 0===e&&(e=!1);var n=this.start(t),r=p.current.identifierDay(e);return n.format(r)},e.prototype.matches=function(t,e){return t.dayIdentifier===e},e.SCALES=[1,100,1e4],e.LENGTH=8,e}(at),ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return st(e,t),e.prototype.getScales=function(){return e.SCALES},e.prototype.getLength=function(){return e.LENGTH},e.prototype.get=function(t){return this.compute(t.weekOfYear,t.year)},e.prototype.object=function(t){var e=this.decompute(t);return{week:e[0],year:e[1]}},e.prototype.start=function(t){var e=this.object(t);return wt.build(e.year,0).withWeekOfYear(e.week)},e.prototype.span=function(t,e){void 0===e&&(e=!1);var n=this.start(t),r=n.endOfWeek(e);return new ut(n,r)},e.prototype.describe=function(t,e){void 0===e&&(e=!1);var n=this.start(t),r=p.current.identifierWeek(e);return n.format(r)},e.prototype.matches=function(t,e){return t.weekIdentifier===e},e.SCALES=[1,1e3],e.LENGTH=7,e}(at),lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return st(e,t),e.prototype.getScales=function(){return e.SCALES},e.prototype.getLength=function(){return e.LENGTH},e.prototype.get=function(t){return this.compute(t.month+1,t.year)},e.prototype.object=function(t){var e=this.decompute(t);return{month:e[0]-1,year:e[1]}},e.prototype.start=function(t){var e=this.object(t);return wt.build(e.year,e.month)},e.prototype.span=function(t,e){void 0===e&&(e=!1);var n=this.start(t),r=n.endOfMonth(e);return new ut(n,r)},e.prototype.describe=function(t,e){void 0===e&&(e=!1);var n=this.start(t),r=p.current.identifierMonth(e);return n.format(r)},e.prototype.matches=function(t,e){return t.monthIdentifier===e},e.SCALES=[1,100],e.LENGTH=6,e}(at),pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return st(e,t),e.prototype.getScales=function(){return e.SCALES},e.prototype.getLength=function(){return e.LENGTH},e.prototype.get=function(t){return this.compute(t.quarter,t.year)},e.prototype.object=function(t){var e=this.decompute(t);return{quarter:e[0],year:e[1]}},e.prototype.start=function(t){var e=this.object(t);return wt.build(e.year,3*(e.quarter-1))},e.prototype.span=function(t,e){void 0===e&&(e=!1);var n=this.start(t),r=n.relativeMonths(3).endOfMonth(e);return new ut(n,r)},e.prototype.describe=function(t,e){void 0===e&&(e=!1);var n=this.start(t),r=p.current.identifierQuarter(e);return n.format(r)},e.prototype.matches=function(t,e){return t.quarterIdentifier===e},e.SCALES=[1,10],e.LENGTH=5,e}(at),dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return st(e,t),e.prototype.getScales=function(){return e.SCALES},e.prototype.getLength=function(){return e.LENGTH},e.prototype.get=function(t){return this.compute(t.year)},e.prototype.object=function(t){return{year:this.decompute(t)[0]}},e.prototype.start=function(t){var e=this.object(t);return wt.build(e.year,0)},e.prototype.span=function(t,e){void 0===e&&(e=!1);var n=this.start(t),r=n.endOfYear(e);return new ut(n,r)},e.prototype.describe=function(t,e){void 0===e&&(e=!1);var n=this.start(t),r=p.current.identifierYear(e);return n.format(r)},e.prototype.matches=function(t,e){return t.year===e},e.SCALES=[1],e.LENGTH=4,e}(at);at.Time=new ft,at.Day=new ct,at.Week=new ht,at.Month=new lt,at.Quarter=new pt,at.Year=new dt;var yt,vt=function(){return function(t,e,n,r){void 0===r&&(r=!0),this.schedule=t,this.data=e,this.id=n,this.visible=r}}(),mt=function(){function t(){this.map={}}return t.prototype.clear=function(){return this.map={},this},t.prototype.isEmpty=function(){for(var t in this.map)return!t;return!0},t.prototype.get=function(t,e,n){void 0===n&&(n=!0);var r=this.map;return n&&r[t.timeIdentifier]||r[t.dayIdentifier]||r[t.monthIdentifier]||r[t.weekIdentifier]||r[t.quarterIdentifier]||e},t.prototype.getIdentifier=function(t,e){void 0===e&&(e=!0);var n=this.map;return e&&o.isDefined(n[t.timeIdentifier])?at.Time:o.isDefined(n[t.dayIdentifier])?at.Day:o.isDefined(n[t.monthIdentifier])?at.Month:o.isDefined(n[t.weekIdentifier])?at.Week:o.isDefined(n[t.quarterIdentifier])?at.Quarter:o.isDefined(n[t.year])?at.Year:null},t.prototype.getAll=function(t){var e=this.map,n=[];return e[t.timeIdentifier]&&n.push(e[t.timeIdentifier]),e[t.dayIdentifier]&&n.push(e[t.dayIdentifier]),e[t.monthIdentifier]&&n.push(e[t.monthIdentifier]),e[t.weekIdentifier]&&n.push(e[t.weekIdentifier]),e[t.quarterIdentifier]&&n.push(e[t.quarterIdentifier]),n},t.prototype.move=function(t,e,n,r){var i=e.get(t),o=r.get(n);return this.map[o]=this.map[i],delete this.map[i],this},t.prototype.moveTime=function(t,e){var n=at.Time,r=[];this.iterate().each(function(e){var i=e[0];e[1];n.is(i)&&(n.start(i).sameTime(t)&&r.push(i))});for(var i=0,o=0,u=r;o<u.length;o++){var s=u[o],a=this.map[s],f=n.start(s).withTime(e),c=n.get(f);this.map[c]||(this.map[c]=a,delete this.map[s],i++)}return i},t.prototype.removeTime=function(t){var e=at.Time,n=0;return this.iterate().each(function(r,i,o){var u=r[0];e.is(u)&&(e.start(u).sameTime(t)&&(o.remove(),n++))}),n},t.prototype.set=function(t,e,n){return this.map[n.get(t)]=e,this},t.prototype.unset=function(t,e){return delete this.map[e.get(t)],this},t.prototype.iterate=function(){var t=this;return new r.Iterate(function(e){var n=t.map;for(var i in n){var o=parseInt(i),u=o+""===i?o:i;switch(e.act([u,n[i]],i)){case r.IterateAction.STOP:return;case r.IterateAction.REMOVE:delete n[i]}}})},t.prototype.query=function(t){return this.iterate().where(function(e){var n=e[0];e[1];return at.contains(t,n)})},t.prototype.identifiers=function(t){return this.iterate().where(function(e){var n=e[0],r=e[1];return!t||t(r,n)}).transform(function(t){return t[0]})},t.prototype.spans=function(t){return void 0===t&&(t=!1),this.iterate().transform(function(e){var n=e[0],r=e[1],i=at.find(n);if(i)return{span:i.span(n,t),value:r}})},t.prototype.describe=function(t){return void 0===t&&(t=!1),this.iterate().transform(function(e){var n=e[0],r=at.find(n);if(r)return r.describe(n,t)})},t.prototype.describeMap=function(t){void 0===t&&(t=!1);var e=this.map,n={};for(var r in e){var i=at.find(r);i&&(n[i.describe(r,t)]=e[r])}return n},t}();!function(t){t[t.DAY=0]="DAY",t[t.WEEK=1]="WEEK",t[t.MONTH=2]="MONTH",t[t.YEAR=3]="YEAR"}(yt||(yt={}));for(var Ot,Mt=function(){function t(t){this.exclude=new mt,this.include=new mt,this.cancel=new mt,this.meta=new mt,o.isDefined(t)&&this.set(t)}return Object.defineProperty(t.prototype,"maxOccurrences",{get:function(){return this._maxOccurrences},set:function(t){this._maxOccurrences=t,this.checks&&this.updateEnd()},enumerable:!0,configurable:!0}),t.prototype.set=function(e,n){return void 0===n&&(n=function(t){return t}),e instanceof t?Et.schedule(e.toInput(),void 0,this):Et.schedule(e,o.coalesce(e.parseMeta,n),this),this},Object.defineProperty(t.prototype,"lastTime",{get:function(){return this.times[this.times.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifierType",{get:function(){return this.isFullDay()?at.Day:at.Time},enumerable:!0,configurable:!0}),t.prototype.updateDurationInDays=function(){var t=this.lastTime?this.lastTime.toMilliseconds():0,e=this.duration*(M[this.durationUnit]||0),n=i.MILLIS_IN_DAY,r=i.MILLIS_IN_DAY;return this.durationInDays=Math.max(0,Math.ceil((t+e-n)/r)),this},t.prototype.updateChecks=function(){return this.checks=Et.givenFrequency([this.year,this.month,this.day,this.quarter,this.week,this.weekOfYear,this.fullWeekOfYear,this.weekspanOfYear,this.lastFullWeekOfYear,this.lastWeekspanOfYear,this.weekOfMonth,this.weekspanOfMonth,this.fullWeekOfMonth,this.lastWeekspanOfMonth,this.lastFullWeekOfMonth,this.dayOfWeek,this.dayOfMonth,this.lastDayOfMonth,this.dayOfYear]),this},t.prototype.updateEnd=function(){var t=this;if(this.maxOccurrences>0&&this.start){this.end=null;var e=(this.getMaximum("year")-this.start.year+1)*i.DAYS_IN_YEAR,n=this.include.spans().where(function(e){return e.span.start.isBefore(t.start)}).count(),r=this.maxOccurrences-n,o=this.forecast(this.start,!1,r,0,!0,e).last();o&&(this.end=o[0].end)}return this},t.prototype.getMaximum=function(t){if(!this.start)return-1;if(this.end)return this.end[t];var e=this.maxOccurrences,n=this.start[t],r=this[t];if(r){var i=r.input;if(o.isFrequencyValueEquals(i))return i;if(o.isFrequencyValueOneOf(i)){for(var u=i[0],s=1;s<i.length;s++)i[s]>u&&(u=i[s]);return u}if(e>0&&o.isFrequencyValueEvery(i)){var a=i.every;return n+(i.offset||0)+a*e}}return e<=0?-1:n+e-1},t.prototype.getStart=function(){if(this.start)return this.start;var t=this.getSingleEventSpan();return t?t.start:null},t.prototype.getEnd=function(){if(this.end)return this.end;var t=this.getSingleEventSpan();return t?t.end:null},t.prototype.getRange=function(t){var e=this;void 0===t&&(t=!0);var n=this.times.length>0,r=this.getStart(),i=this.getEnd();return t&&this.include.spans().each(function(t){var o=t.span;e.isExcluded(o.start,n)||(r&&!o.start.isBefore(r)||(r=o.start),i&&!o.end.isAfter(i)||(i=o.end))}),{start:r,end:i}},t.prototype.getOccurrences=function(){var t=this.getStart(),e=this.getEnd();if(!t||!e)return r.Iterate.empty();var n=t.daysBetween(e,j.CEIL,!0),i=this.include.spans().where(function(e){return e.span.start.isBefore(t)}).sorted(function(t,e){return t.span.start.time-e.span.start.time}).transform(function(t){return t.span}),o=this.forecast(t,!1,n).transform(function(t){return t[0]}),u=this.include.spans().where(function(t){return t.span.start.isAfter(e)}).sorted(function(t,e){return t.span.start.time-e.span.start.time}).transform(function(t){return t.span});return r.Iterate.join(i,o,u)},t.prototype.matchesSpan=function(t){return(null===this.start||t.isSameOrAfter(this.start))&&(null===this.end||t.isBefore(this.end))},t.prototype.matchesRange=function(t,e){return(!this.start||!e.isBefore(this.start))&&(!this.end||!t.isAfter(this.end))},t.prototype.isExcluded=function(t,e){return void 0===e&&(e=!0),this.exclude.get(t,!1,e)},t.prototype.isIncluded=function(t,e){return void 0===e&&(e=!0),this.include.get(t,!1,e)},t.prototype.isCancelled=function(t,e){return void 0===e&&(e=!0),this.cancel.get(t,!1,e)},t.prototype.getMeta=function(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=!0),this.meta.get(t,e,n)},t.prototype.getMetas=function(t){return this.meta.getAll(t)},t.prototype.isFullDay=function(){return 0===this.times.length},t.prototype.setFullDay=function(t,e){return void 0===t&&(t=!0),void 0===e&&(e="08:00"),t!==this.isFullDay()&&(t?(this.times=[],"day"!==this.durationUnit&&(this.duration=1,this.durationUnit="day")):(this.times=[Et.time(e)],"hour"!==this.durationUnit&&(this.duration=1,this.durationUnit="hour"))),this},t.prototype.adjustDefinedSpan=function(t){void 0===t&&(t=!1);var e=this.getSingleEventSpan();return e&&(t||this.start&&this.end)&&(this.start=e.start.start(),this.end=e.end.end()),this},t.prototype.getFullSpan=function(t){var e=t.start(),n=e.add(this.duration,this.durationUnit);return new ut(e,n)},t.prototype.getTimeSpan=function(t,e){var n=t.withTime(e),r=n.add(this.duration,this.durationUnit);return new ut(n,r)},t.prototype.matchesDay=function(t){if(this.isIncluded(t,!1))return!0;if(!this.matchesSpan(t)||this.isFullyExcluded(t))return!1;for(var e=0,n=this.checks;e<n.length;e++){var r=n[e];if(!r(t[r.property]))return!1}return!0},t.prototype.hasIncludedTime=function(t){return!this.iterateIncludeTimes(t).empty()},t.prototype.isFullyExcluded=function(t){if(this.exclude.isEmpty())return!1;if(this.isExcluded(t,!1))return!0;if(this.isFullDay())return!1;for(var e=0,n=this.times;e<n.length;e++){var r=n[e];if(!this.isExcluded(t.withTime(r)))return!1}return!0},t.prototype.nextDay=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=i.DAYS_IN_YEAR),this.iterateDaycast(t,1,!0,e,n).first()},t.prototype.nextDays=function(t,e,n,r){return void 0===n&&(n=!1),void 0===r&&(r=i.DAYS_IN_YEAR),this.iterateDaycast(t,e,!0,n,r)},t.prototype.prevDay=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=i.DAYS_IN_YEAR),this.iterateDaycast(t,1,!1,e,n).first()},t.prototype.prevDays=function(t,e,n,r){return void 0===n&&(n=!1),void 0===r&&(r=i.DAYS_IN_YEAR),this.iterateDaycast(t,e,!1,n,r)},t.prototype.iterateDaycast=function(t,e,n,o,u){var s=this;return void 0===o&&(o=!1),void 0===u&&(u=i.DAYS_IN_YEAR),new r.Iterate(function(i){for(var a=0,f=0,c=0;c<u;c++){if((!o||c>0)&&(t=n?t.next():t.prev()),!s.iterateSpans(t,!1).empty())if(i.act(t,f++)===r.IterateAction.STOP||++a>=e)return}})},t.prototype.iterateSpans=function(t,e){var n=this;return void 0===e&&(e=!1),new r.Iterate(function(i){var o=t,u=e?n.durationInDays:0,s=0;if(n.isFullDay())for(;u>=0;){if(n.matchesDay(o))if((c=n.getFullSpan(o)).matchesDay(t))switch(i.act(c,s++)){case r.IterateAction.STOP:return}o=o.prev(),u--}else for(;u>=0;){if(n.matchesDay(o))for(var a=0,f=n.times;a<f.length;a++){var c,h=f[a];if((c=n.getTimeSpan(o,h)).matchesDay(t)&&!n.isExcluded(c.start,!0))switch(i.act(c,s++)){case r.IterateAction.STOP:return}}else if(n.iterateIncludeTimes(o,t).each(function(t,e,n){switch(i.act(t,s++)){case r.IterateAction.STOP:n.stop()}}),i.action===r.IterateAction.STOP)return;--u>=0&&(o=o.prev())}})},t.prototype.matchesTime=function(t){return!!this.iterateSpans(t,!0).where(function(e){return e.start.sameMinute(t)}).first()},t.prototype.coversDay=function(t){return!this.iterateSpans(t,!0).empty()},t.prototype.coversTime=function(t){return!!this.iterateSpans(t,!0).where(function(e){return e.contains(t)}).first()},t.prototype.setFrequency=function(t,e){return this[t]=Et.frequency(e,t),this},t.prototype.setExcluded=function(t,e){void 0===e&&(e=!0);var n=this.identifierType;return this.exclude.set(t,e,n),this.include.set(t,!e,n),this},t.prototype.setCancelled=function(t,e){return void 0===e&&(e=!0),this.cancel.set(t,e,this.identifierType),this},t.prototype.removeTime=function(t,e){void 0===e&&(e=!0);for(var n=!1,r=0;r<this.times.length&&!n;r++)(n=t.matches(this.times[r]))&&this.times.splice(r,1);return n&&(e&&this.include.removeTime(t),this.exclude.removeTime(t),this.cancel.removeTime(t),this.meta.removeTime(t)),n},t.prototype.move=function(t,e,n){return!(this.moveSingleEvent(t)||!e)&&this.moveInstance(e,t)},t.prototype.moveTime=function(t,e){for(var n=!1,r=0;r<this.times.length&&!n;r++)(n=t.matches(this.times[r]))&&this.times.splice(r,1,e);return n&&(this.include.moveTime(t,e),this.exclude.moveTime(t,e),this.cancel.moveTime(t,e),this.meta.moveTime(t,e),this.adjustDefinedSpan(!1)),n},t.prototype.moveInstance=function(t,e){var n=this.identifierType;this.exclude.set(t,!0,n),this.exclude.set(e,!1,n),this.include.set(e,!0,n),this.include.set(t,!1,n),this.cancel.get(t,!1)&&!this.cancel.get(e,!1)&&(this.cancel.set(e,!0,n),this.cancel.getIdentifier(t)===n&&this.cancel.unset(t,n));var r=this.meta.get(t,null);return r&&r!==this.meta.get(e,null)&&(this.meta.set(e,r,n),this.meta.getIdentifier(t)===n&&this.meta.unset(t,n)),!0},t.prototype.moveSingleEvent=function(t,e){if(void 0===e&&(e=!0),!this.isSingleEvent())return!1;for(var n=0,r=this.checks;n<r.length;n++){var i=r[n].property,o=t[i],u=Et.frequency([o],i);this[i]=u}1===this.times.length&&e&&(this.times=[t.asTime()]),this.updateChecks();var s=this.getSingleEventSpan();return this.start&&(this.start=s.start.start()),this.end&&(this.end=s.end.end()),this.updateEnd(),!0},t.prototype.getSingleEventSpan=function(){if(!this.isSingleEvent())return null;var t=wt.build(this.year.input[0],0,1),e=this.iterateDaycast(t,1,!0,!0,i.DAYS_IN_YEAR).first();return e?this.isFullDay()?this.getFullSpan(e):this.getTimeSpan(e,this.times[0]):null},t.prototype.isSingleEvent=function(){return!(this.times.length>1)&&(!!this.include.isEmpty()&&(!!this.isSingleYear()&&(!!this.isSingleDayOfYear()||(!(!this.isSingleMonth()||!this.isSingleDayOfMonth())||(!!(this.isSingleMonth()&&this.isSingleWeekOfMonth()&&this.isSingleDayOfWeek())||!(!this.isSingleWeekOfYear()||!this.isSingleDayOfWeek()))))))},t.prototype.isSingleYear=function(){return this.isSingleFrequency(this.year)},t.prototype.isSingleMonth=function(){return this.isSingleFrequency(this.month)},t.prototype.isSingleDayOfMonth=function(){return this.isSingleFrequency(this.dayOfMonth)||this.isSingleFrequency(this.lastDayOfMonth)},t.prototype.isSingleDayOfWeek=function(){return this.isSingleFrequency(this.dayOfWeek)||this.isSingleFrequency(this.day)},t.prototype.isSingleDayOfYear=function(){return this.isSingleFrequency(this.dayOfYear)},t.prototype.isSingleWeekOfMonth=function(){return this.isSingleFrequency(this.weekspanOfMonth)||this.isSingleFrequency(this.fullWeekOfMonth)||this.isSingleFrequency(this.weekOfMonth)||this.isSingleFrequency(this.lastFullWeekOfMonth)||this.isSingleFrequency(this.lastWeekspanOfMonth)},t.prototype.isSingleWeekOfYear=function(){return this.isSingleFrequency(this.weekspanOfYear)||this.isSingleFrequency(this.fullWeekOfYear)||this.isSingleFrequency(this.week)||this.isSingleFrequency(this.weekOfYear)||this.isSingleFrequency(this.lastFullWeekOfYear)||this.isSingleFrequency(this.lastWeekspanOfYear)},t.prototype.isSingleFrequency=function(t){return o.isFrequencyValueOneOf(t.input)&&1===t.input.length||o.isFrequencyValueEquals(t.input)},t.prototype.forecast=function(t,e,n,o,u,s){var a=this;void 0===e&&(e=!0),void 0===o&&(o=n),void 0===u&&(u=!1),void 0===s&&(s=i.DAYS_IN_YEAR);var f=this.identifierType,c=0,h=function(t,n){for(var i=a.iterateSpans(t,e).array(),o=u?i.length:Math.min(1,i.length),s=u?0:i.length-1,h=0;h<o;h++){var l=i[h+s],p=f.get(l.start);if(n.act([l,t,p],c++)===r.IterateAction.STOP)return!1}return!0},l=new r.Iterate(function(e){for(var n=t,r=0;r<s&&h(n,e);r++)n=n.prev()}),p=new r.Iterate(function(e){for(var n=t,r=0;r<s&&(n=n.next(),h(n,e));r++);});return l.take(o+1).reverse().append(p.take(n))},t.prototype.iterateIncludeTimes=function(t,e){var n=this;void 0===e&&(e=t);return this.include.query(t.dayIdentifier).where(function(t){var e=t[0];return t[1]&&at.Time.is(e)}).transform(function(t){var r=t[0],i=at.Time.start(r),o=n.getTimeSpan(i,i.asTime());if(o.matchesDay(e))return o})},t.prototype.clone=function(){return new t(this.toInput())},t.prototype.toInput=function(t,e,n,r,u){void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===n&&(n=""),void 0===r&&(r=!1),void 0===u&&(u=!1);for(var s=i.DURATION_DEFAULT_UNIT(this.isFullDay()),a=this.exclude.identifiers(function(t){return t}).array(),f=this.include.identifiers(function(t){return t}).array(),c=this.cancel.identifiers(function(t){return t}).array(),h=!this.meta.isEmpty(),l={},p=[],d=0,y=this.times;d<y.length;d++){var v=y[d];p.push(e?v:n?v.format(n):v.toString())}return this.start&&(l.start=t?this.start:this.start.time),this.end&&(u||this.maxOccurrences<1)&&(l.end=t?this.end:this.end.time),this.maxOccurrences>0&&(l.maxOccurrences=this.maxOccurrences),p.length&&(l.times=p),(r||this.duration!==i.DURATION_DEFAULT)&&(l.duration=this.duration),(r||this.durationUnit!==s)&&(l.durationUnit=this.durationUnit),a.length&&(l.exclude=a),f.length&&(l.include=f),c.length&&(l.cancel=c),h&&(l.meta=o.extend({},this.meta.map)),this.dayOfWeek.input&&(l.dayOfWeek=this.dayOfWeek.input),this.dayOfMonth.input&&(l.dayOfMonth=this.dayOfMonth.input),this.lastDayOfMonth.input&&(l.lastDayOfMonth=this.lastDayOfMonth.input),this.dayOfYear.input&&(l.dayOfYear=this.dayOfYear.input),this.year.input&&(l.year=this.year.input),this.month.input&&(l.month=this.month.input),this.day.input&&(l.day=this.day.input),this.week.input&&(l.week=this.week.input),this.weekOfYear.input&&(l.weekOfYear=this.weekOfYear.input),this.weekspanOfYear.input&&(l.weekspanOfYear=this.weekspanOfYear.input),this.fullWeekOfYear.input&&(l.fullWeekOfYear=this.fullWeekOfYear.input),this.lastWeekspanOfYear.input&&(l.lastWeekspanOfYear=this.lastWeekspanOfYear.input),this.lastFullWeekOfYear.input&&(l.lastFullWeekOfYear=this.lastFullWeekOfYear.input),this.weekOfMonth.input&&(l.weekOfMonth=this.weekOfMonth.input),this.weekspanOfMonth.input&&(l.weekspanOfMonth=this.weekspanOfMonth.input),this.fullWeekOfMonth.input&&(l.fullWeekOfMonth=this.fullWeekOfMonth.input),this.lastWeekspanOfMonth.input&&(l.lastWeekspanOfMonth=this.lastWeekspanOfMonth.input),this.lastFullWeekOfMonth.input&&(l.lastFullWeekOfMonth=this.lastFullWeekOfMonth.input),l},t.prototype.describe=function(t,e,n,r,o,u,s){void 0===t&&(t="event"),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===u&&(u=!1),void 0===s&&(s=!1);var a=p.current,f="";if(e&&(this.start?(f+=a.scheduleStartingOn(this.start),this.end&&(f+=a.scheduleEndingOn(this.end))):this.end&&(f+=a.scheduleEndsOn(this.end))),f+=a.scheduleThing(t,!f),f+=this.describeRule(this.dayOfWeek.input,a.ruleDayOfWeek),f+=this.describeRule(this.day.input,a.ruleDay),f+=this.describeRule(this.lastDayOfMonth.input,a.ruleLastDayOfMonth),f+=this.describeRule(this.dayOfMonth.input,a.ruleDayOfMonth),f+=this.describeRule(this.dayOfYear.input,a.ruleDayOfYear),f+=this.describeRule(this.year.input,a.ruleYear),f+=this.describeRule(this.month.input,a.ruleMonth),f+=this.describeRule(this.week.input,a.ruleWeek),f+=this.describeRule(this.weekOfYear.input,a.ruleWeekOfYear),f+=this.describeRule(this.weekspanOfYear.input,a.ruleWeekspanOfYear),f+=this.describeRule(this.fullWeekOfYear.input,a.ruleFullWeekOfYear),f+=this.describeRule(this.lastWeekspanOfYear.input,a.ruleLastWeekspanOfYear),f+=this.describeRule(this.lastFullWeekOfYear.input,a.ruleLastFullWeekOfYear),f+=this.describeRule(this.weekOfMonth.input,a.ruleWeekOfMonth),f+=this.describeRule(this.fullWeekOfMonth.input,a.ruleFullWeekOfMonth),f+=this.describeRule(this.weekspanOfMonth.input,a.ruleWeekspanOfMonth),f+=this.describeRule(this.lastFullWeekOfMonth.input,a.ruleLastFullWeekOfMonth),f+=this.describeRule(this.lastWeekspanOfMonth.input,a.ruleLastWeekspanOfMonth),n&&this.times.length&&(f+=a.scheduleAtTimes,f+=this.describeArray(this.times,function(t){return t.format("hh:mm a")})),r&&this.duration!==i.DURATION_DEFAULT&&(f+=a.scheduleDuration(this.duration,this.durationUnit)),o){var c=this.exclude.spans().array();c.length&&(f+=a.scheduleExcludes,f+=this.describeArray(c,function(t){return t.span.summary(yt.DAY)}))}if(u){var h=this.include.spans().array();h.length&&(f+=a.scheduleIncludes,f+=this.describeArray(h,function(t){return t.span.summary(yt.DAY)}))}if(s){var l=this.cancel.spans().array();l.length&&(f+=a.scheduleCancels,f+=this.describeArray(l,function(t){return t.span.summary(yt.DAY)}))}return f},t.prototype.describeRule=function(t,e){var n="";return o.isFrequencyValueEvery(t)?(n+=" "+e.every(t.every),t.offset&&(n+=" "+e.offset(t.offset))):o.isFrequencyValueOneOf(t)?t.length&&(n+=" "+e.oneOf(t)):o.isFrequencyValueEquals(t)&&(n+=" "+e.oneOf([t])),n},t.prototype.describeArray=function(t,e){return p.current.list(t.map(e))},t.forDay=function(e,n){void 0===n&&(n=1);var r=wt.parse(e);return r?new t({year:[r.year],month:[r.month],dayOfMonth:[r.dayOfMonth],duration:n,durationUnit:"day"}):null},t.forTime=function(e,n,r,i){void 0===r&&(r=1),void 0===i&&(i="hour");var o=wt.parse(e);return o?new t({year:[o.year],month:[o.month],dayOfMonth:[o.dayOfMonth],times:[n],duration:r,durationUnit:i}):null},t.forSpan=function(t){var e=t.start,n=t.minutes(),r=n%i.MINUTES_IN_DAY==0,o=n%i.MINUTES_IN_HOUR==0,u=r?n/i.MINUTES_IN_DAY:o?n/i.MINUTES_IN_HOUR:n,s=r?"day":o?"hour":"minute";return this.forTime(e,e.asTime(),u,s)},t}(),gt=new u({A:function(t){return p.current[t.hour<12?"am":"pm"].toUpperCase()},a:function(t){return p.current[t.hour<12?"am":"pm"]},H:function(t){return t.hour+""},h:function(t){return(t.hour%12||12)+""},k:function(t){return t.hour+1+""},m:function(t){return t.minute+""},s:function(t){return t.second+""},S:function(t){return o.padNumber(t.millisecond,3,1)},HH:function(t){return o.padNumber(t.hour,2)},hh:function(t){return o.padNumber(t.hour%12||12,2)},kk:function(t){return o.padNumber(t.hour+1,2)},mm:function(t){return o.padNumber(t.minute,2)},ss:function(t){return o.padNumber(t.second,2)},SS:function(t){return o.padNumber(t.millisecond,3,2)},SSS:function(t){return o.padNumber(t.millisecond,3)}},{"[":{start:"[",startEscape:"[",end:"]",endEscape:"]"},"'":{start:"'",startEscape:"''",end:"'",endEscape:"''"}}),St=function(){function t(t,e,n,r){void 0===e&&(e=i.MINUTE_MIN),void 0===n&&(n=i.SECOND_MIN),void 0===r&&(r=i.MILLIS_MIN),this.hour=t,this.minute=e,this.second=n,this.millisecond=r}return t.prototype.format=function(t){return gt.format(t,this)},t.prototype.matches=function(t){return this.hour===t.hour&&this.minute===t.minute&&this.second===t.second&&this.millisecond===t.millisecond},t.prototype.matchesHour=function(t){return this.hour===t.hour},t.prototype.matchesMinute=function(t){return this.hour===t.hour&&this.minute===t.minute},t.prototype.matchesSecond=function(t){return this.hour===t.hour&&this.minute===t.minute&&this.second===t.second},t.prototype.set=function(e){var n=t.parse(e),r=!!n;return r&&(this.hour=n.hour,this.minute=n.minute,this.second=n.second,this.millisecond=n.millisecond),r},t.prototype.toMilliseconds=function(){return this.hour*i.MILLIS_IN_HOUR+this.minute*i.MILLIS_IN_MINUTE+this.second*i.MILLIS_IN_SECOND+this.millisecond},t.prototype.toString=function(){return this.millisecond?this.format("HH:mm:ss.SSS"):this.second?this.format("HH:mm:ss"):this.minute?this.format("HH:mm"):this.format("HH")},t.prototype.toIdentifier=function(){return this.hour+100*this.minute+1e4*this.second+1e7*this.millisecond},t.prototype.toObject=function(){var t={hour:this.hour};return this.minute&&(t.minute=this.minute),this.second&&(t.second=this.second),this.millisecond&&(t.millisecond=this.millisecond),t},t.parse=function(t){return Et.time(t)},t.fromString=function(t){var e=this.REGEX.exec(t);if(!e)return null;var n=parseInt(e[1])||0,r=parseInt(e[2])||0,i=parseInt(e[3])||0,o=parseInt(e[4])||0;return this.build(n,r,i,o)},t.fromIdentifier=function(t){var e=t%100,n=Math.floor(t/100)%100,r=Math.floor(t/1e4)%100,i=Math.floor(t/1e7)%1e3;return this.build(e,n,r,i)},t.build=function(e,n,r,o){return void 0===n&&(n=i.MINUTE_MIN),void 0===r&&(r=i.SECOND_MIN),void 0===o&&(o=i.MILLIS_MIN),new t(e,n,r,o)},t.REGEX=/^(\d\d?):?(\d\d)?:?(\d\d)?\.?(\d\d\d)?$/,t}(),Et=function(){function t(){}return t.frequency=function(t,e){var n=function(t){return!0};if(n.given=!1,o.isFrequencyValueEvery(t)){var r=t.every,i=(t.offset||0)%r;(n=function(t){return t%r===i}).given=!0}if(o.isFrequencyValueOneOf(t)){for(var u={},s=0,a=t;s<a.length;s++){var f=a[s];u[f]=!0}(n=function(t){return!!u[t]}).given=!0}return o.isFrequencyValueEquals(t)&&((n=function(e){return e===t}).given=!0),n.input=o.coalesce(t,null),n.property=e,n},t.day=function(t){return o.isNumber(t)?wt.unix(t):o.isString(t)?wt.fromString(t):t instanceof wt?t:o.isArray(t)?wt.fromArray(t):o.isObject(t)?wt.fromObject(t):!0===t?wt.today():null},t.time=function(t){return t instanceof St?t:o.isNumber(t)?St.fromIdentifier(t):o.isString(t)?St.fromString(t):o.isObject(t)&&o.isNumber(t.hour)?new St(t.hour,t.minute,t.second,t.millisecond):null},t.times=function(t){var e=[];if(o.isArray(t)){for(var n=0,r=t;n<r.length;n++){var i=r[n],u=this.time(i);u&&e.push(u)}e.sort(function(t,e){return t.toMilliseconds()-e.toMilliseconds()})}return e},t.modifier=function(t,e,n,r){void 0===n&&(n=function(t){return t}),void 0===r&&(r=new mt);var i={};if(o.isArray(t))for(var u=0,s=t;u<s.length;u++){(a=s[u])instanceof wt?i[a.dayIdentifier]=e:o.isNumber(a)?i[a]=e:o.isString(a)&&(i[a]=e)}if(o.isObject(t))for(var a in t)i[a]=n(t[a]);return r.map=i,r},t.unit=function(t,e){if(void 0===e&&(e=!1),"string"!=typeof t)return i.DURATION_DEFAULT_UNIT(e);switch(t.toLowerCase()){case"ms":case"milli":case"millis":case"millisecond":case"milliseconds":return"millis";case"s":case"sec":case"secs":case"second":case"seconds":return"second";case"m":case"min":case"mins":case"minute":case"minutes":return"minute";case"h":case"hr":case"hour":case"hours":return"hour";case"d":case"day":case"days":return"day";case"w":case"wk":case"week":case"weeks":return"week";case"mon":case"month":case"months":return"month";case"q":case"quarter":case"quarters":return"quarter";case"y":case"yr":case"yrs":case"year":case"years":return"year"}return i.DURATION_DEFAULT_UNIT(e)},t.schedule=function(t,e,n){if(void 0===e&&(e=function(t){return t}),void 0===n&&(n=new Mt),t instanceof Mt)return t;var r=this.day(t.on),u=this.times(t.times),s=0===u.length;return r&&(t.start=r.start(),t.end=r.end(),t.year=[r.year],t.month=[r.month],t.dayOfMonth=[r.dayOfMonth]),n.times=u,n.duration=o.coalesce(t.duration,i.DURATION_DEFAULT),n.durationUnit=this.unit(t.durationUnit,s),n.start=this.day(t.start),n.end=this.day(t.end),n.maxOccurrences=o.coalesce(t.maxOccurrences,0),n.exclude=this.modifier(t.exclude,!0,void 0,n.exclude),n.include=this.modifier(t.include,!0,void 0,n.include),n.cancel=this.modifier(t.cancel,!0,void 0,n.cancel),n.meta=this.modifier(t.meta,null,e,n.meta),n.year=this.frequency(t.year,"year"),n.month=this.frequency(t.month,"month"),n.day=this.frequency(t.day,"day"),n.quarter=this.frequency(t.quarter,"quarter"),n.week=this.frequency(t.week,"week"),n.weekOfYear=this.frequency(t.weekOfYear,"weekOfYear"),n.weekspanOfYear=this.frequency(t.weekspanOfYear,"weekspanOfYear"),n.fullWeekOfYear=this.frequency(t.fullWeekOfYear,"fullWeekOfYear"),n.lastWeekspanOfYear=this.frequency(t.lastWeekspanOfYear,"lastWeekspanOfYear"),n.lastFullWeekOfYear=this.frequency(t.lastFullWeekOfYear,"lastFullWeekOfYear"),n.weekOfMonth=this.frequency(t.weekOfMonth,"weekOfMonth"),n.weekspanOfMonth=this.frequency(t.weekspanOfMonth,"weekspanOfMonth"),n.fullWeekOfMonth=this.frequency(t.fullWeekOfMonth,"fullWeekOfMonth"),n.lastWeekspanOfMonth=this.frequency(t.lastWeekspanOfMonth,"lastWeekspanOfMonth"),n.lastFullWeekOfMonth=this.frequency(t.lastFullWeekOfMonth,"lastFullWeekOfMonth"),n.dayOfWeek=this.frequency(t.dayOfWeek,"dayOfWeek"),n.dayOfMonth=this.frequency(t.dayOfMonth,"dayOfMonth"),n.lastDayOfMonth=this.frequency(t.lastDayOfMonth,"lastDayOfMonth"),n.dayOfYear=this.frequency(t.dayOfYear,"dayOfYear"),n.updateDurationInDays(),n.updateChecks(),n.updateEnd(),n},t.givenFrequency=function(t){for(var e=[],n=0,r=t;n<r.length;n++){var i=r[n];i.given&&e.push(i)}return e},t.event=function(t,e,n){if(void 0===e&&(e=function(t){return t}),void 0===n&&(n=function(t){return t}),t instanceof vt)return t;if(!t.schedule)return null;var r=this.schedule(t.schedule,n);return new vt(r,e(t.data),t.id,t.visible)},t.cron=function(t,e){return void 0===e&&(e=new Mt),e},t}(),wt=function(){function t(t){this._quarter=null,this._dayOfYear=null,this._dayOfWeek=null,this._lastDayOfMonth=null,this._week=null,this._weekOfYear=null,this._weekspanOfYear=null,this._fullWeekOfYear=null,this._lastWeekspanOfYear=null,this._lastFullWeekOfYear=null,this._weekOfMonth=null,this._weekspanOfMonth=null,this._fullWeekOfMonth=null,this._lastWeekspanOfMonth=null,this._lastFullWeekOfMonth=null,this._timeIdentifier=null,this._dayIdentifier=null,this._weekIdentifier=null,this._monthIdentifier=null,this._quarterIdentifier=null,this.date=t,this.time=t.valueOf(),this.millis=t.getMilliseconds(),this.seconds=t.getSeconds(),this.minute=t.getMinutes(),this.hour=t.getHours(),this.month=t.getMonth(),this.year=t.getFullYear(),this.day=t.getDay(),this.dayOfMonth=t.getDate(),this._locale=p.ref}return Object.defineProperty(t.prototype,"quarter",{get:function(){return this.getValue("_quarter",z)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dayOfYear",{get:function(){return this.getValue("_dayOfYear",U)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dayOfWeek",{get:function(){return this.getLocaleValue("_dayOfWeek",F)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastDayOfMonth",{get:function(){return this.getValue("_lastDayOfMonth",E)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"week",{get:function(){return this.getLocaleValue("_week",k)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weekOfYear",{get:function(){return this.getLocaleValue("_weekOfYear",D)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weekspanOfYear",{get:function(){return this.getValue("_weekspanOfYear",I)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullWeekOfYear",{get:function(){return this.getLocaleValue("_fullWeekOfYear",_)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastWeekspanOfYear",{get:function(){return this.getValue("_lastWeekspanOfYear",w)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastFullWeekOfYear",{get:function(){return this.getLocaleValue("_lastFullWeekOfYear",Y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weekOfMonth",{get:function(){return this.getLocaleValue("_weekOfMonth",W)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weekspanOfMonth",{get:function(){return this.getValue("_weekspanOfMonth",N)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullWeekOfMonth",{get:function(){return this.getLocaleValue("_fullWeekOfMonth",A)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastWeekspanOfMonth",{get:function(){return this.getValue("_lastWeekspanOfMonth",b)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastFullWeekOfMonth",{get:function(){return this.getLocaleValue("_lastFullWeekOfMonth",T)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeIdentifier",{get:function(){var t=this;return this.getValue("_timeIdentifier",function(){return at.Time.get(t)})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dayIdentifier",{get:function(){var t=this;return this.getValue("_dayIdentifier",function(){return at.Day.get(t)})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weekIdentifier",{get:function(){var t=this;return this.getValue("_weekIdentifier",function(){return at.Week.get(t)})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"monthIdentifier",{get:function(){var t=this;return this.getValue("_monthIdentifier",function(){return at.Month.get(t)})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quarterIdentifier",{get:function(){var t=this;return this.getValue("_quarterIdentifier",function(){return at.Quarter.get(t)})},enumerable:!0,configurable:!0}),t.prototype.getLocaleValue=function(t,e){return this.checkForUpdate(),null===this[t]&&(this[t]=e(this.date,this._locale.value)),this[t]},t.prototype.getValue=function(t,e){return null===this[t]&&(this[t]=e(this.date)),this[t]},t.prototype.checkForUpdate=function(){this._locale.dirty&&(this._locale=p.ref,this.resetLocaleCache())},t.prototype.setLocale=function(t){var e=p.get(t);return e!==this._locale.value&&(this._locale=this._locale.getUpdate(e),this.resetLocaleCache()),this},t.prototype.getLocale=function(){return this.checkForUpdate(),this._locale.value},t.prototype.clearLocale=function(){p.current!==this._locale.value&&(this._locale=p.ref,this.resetLocaleCache())},t.prototype.resetLocaleCache=function(){this._dayOfWeek=null,this._weekOfYear=null,this._fullWeekOfYear=null,this._lastFullWeekOfYear=null,this._weekOfMonth=null,this._fullWeekOfMonth=null,this._lastFullWeekOfMonth=null},t.prototype.sameDay=function(t){return this.dayIdentifier===t.dayIdentifier},t.prototype.sameMonth=function(t){return this.monthIdentifier===t.monthIdentifier},t.prototype.sameWeek=function(t){return this.weekIdentifier===t.weekIdentifier},t.prototype.sameYear=function(t){return this.year===t.year},t.prototype.sameQuarter=function(t){return this.quarterIdentifier===t.quarterIdentifier},t.prototype.sameHour=function(t){return this.dayIdentifier===t.dayIdentifier&&this.hour===t.hour},t.prototype.sameMinute=function(t){return this.timeIdentifier===t.timeIdentifier},t.prototype.sameTime=function(t){return this.hour===t.hour&&this.minute===t.minute&&this.seconds===t.second&&this.millis===t.millisecond},t.prototype.compare=function(t,e){return S(this.date,t.date,e)},t.prototype.isBefore=function(t,e){return S(this.date,t.date,e)<0},t.prototype.isSameOrBefore=function(t,e){return S(this.date,t.date,e)<=0},t.prototype.isAfter=function(t,e){return S(this.date,t.date,e)>0},t.prototype.isSameOrAfter=function(t,e){return S(this.date,t.date,e)>=0},t.prototype.max=function(t){return S(this.date,t.date)>0?this:t},t.prototype.min=function(t){return S(this.date,t.date)<0?this:t},t.prototype.between=function(t,e,n,r){return void 0===n&&(n=j.DOWN),void 0===r&&(r=!0),it(O[e](this.date,t.date),n,r)},t.prototype.millisBetween=function(t,e,n){return void 0===e&&(e=j.DOWN),void 0===n&&(n=!0),this.between(t,"millis",e,n)},t.prototype.secondsBetween=function(t,e,n){return void 0===e&&(e=j.DOWN),void 0===n&&(n=!0),this.between(t,"second",e,n)},t.prototype.minutesBetween=function(t,e,n){return void 0===e&&(e=j.DOWN),void 0===n&&(n=!0),this.between(t,"minute",e,n)},t.prototype.hoursBetween=function(t,e,n){return void 0===e&&(e=j.DOWN),void 0===n&&(n=!0),this.between(t,"hour",e,n)},t.prototype.daysBetween=function(t,e,n){return void 0===e&&(e=j.DOWN),void 0===n&&(n=!0),this.between(t,"day",e,n)},t.prototype.weeksBetween=function(t,e,n){return void 0===e&&(e=j.DOWN),void 0===n&&(n=!0),this.between(t,"week",e,n)},t.prototype.monthsBetween=function(t,e,n){return void 0===e&&(e=j.DOWN),void 0===n&&(n=!0),this.between(t,"month",e,n)},t.prototype.yearsBetween=function(t,e,n){return void 0===e&&(e=j.DOWN),void 0===n&&(n=!0),this.between(t,"year",e,n)},t.prototype.isBetween=function(t,e,n,r){return void 0===n&&(n=!0),!this.isBefore(t)&&!(n?this.isSameOrAfter(e):this.isAfter(e))},t.prototype.mutate=function(e){var n=this.toDate(),r=e(n);return r instanceof Date?new t(r):new t(n)},t.prototype.add=function(t,e){return void 0===e&&(e="millis"),this.mutate(function(n){return m[e](n,t)})},t.prototype.relative=function(t){return this.add(t)},t.prototype.relativeDays=function(t){return this.add(t,"day")},t.prototype.prev=function(t){return void 0===t&&(t=1),this.relativeDays(-t)},t.prototype.next=function(t){return void 0===t&&(t=1),this.relativeDays(t)},t.prototype.withDayOfMonth=function(t){return this.mutate(function(e){return e.setDate(t)})},t.prototype.withDay=function(t){var e=this;return this.mutate(function(n){return n.setDate(n.getDate()+(t-e.date.getDay()))})},t.prototype.withDayOfWeek=function(t){var e=this;return this.mutate(function(n){return n.setDate(n.getDate()+(t-F(e.date,e.getLocale())))})},t.prototype.withDayOfYear=function(t){var e=this;return this.mutate(function(n){return n.setDate(n.getDate()+(t-U(e.date)))})},t.prototype.withMonth=function(t){return this.mutate(function(e){return e.setMonth(t)})},t.prototype.relativeMonths=function(t){return this.add(t,"month")},t.prototype.prevMonth=function(t){return void 0===t&&(t=1),this.relativeMonths(-t)},t.prototype.nextMonth=function(t){return void 0===t&&(t=1),this.relativeMonths(t)},t.prototype.withWeek=function(t,e){return this.add((t-e)*i.DAYS_IN_WEEK,"day")},t.prototype.withWeekOfYear=function(t){return this.withWeek(t,this.weekOfYear)},t.prototype.withFullWeekOfYear=function(t){return this.withWeek(t,this.fullWeekOfYear)},t.prototype.withWeekspanOfYear=function(t){return this.withWeek(t,this.weekspanOfYear)},t.prototype.withWeekOfMonth=function(t){return this.withWeek(t,this.weekOfMonth)},t.prototype.withWeekspanOfMonth=function(t){return this.withWeek(t,this.weekspanOfMonth)},t.prototype.withFullWeekOfMonth=function(t){return this.withWeek(t,this.fullWeekOfMonth)},t.prototype.relativeWeeks=function(t){return this.add(t,"week")},t.prototype.prevWeek=function(t){return void 0===t&&(t=1),this.relativeWeeks(-t)},t.prototype.nextWeek=function(t){return void 0===t&&(t=1),this.relativeWeeks(t)},t.prototype.withYear=function(t){return this.mutate(function(e){return e.setFullYear(t)})},t.prototype.relativeYears=function(t){return this.add(t,"year")},t.prototype.prevYear=function(t){return void 0===t&&(t=1),this.relativeYears(-t)},t.prototype.nextYear=function(t){return void 0===t&&(t=1),this.relativeYears(t)},t.prototype.withHour=function(t){return this.mutate(function(e){return e.setHours(t)})},t.prototype.relativeHours=function(t){return this.add(t,"hour")},t.prototype.prevHour=function(t){return void 0===t&&(t=1),this.relativeHours(-t)},t.prototype.nextHour=function(t){return void 0===t&&(t=1),this.relativeHours(t)},t.prototype.withTimes=function(t,e,n,r){return void 0===t&&(t=i.HOUR_MIN),void 0===e&&(e=i.MINUTE_MIN),void 0===n&&(n=i.SECOND_MIN),void 0===r&&(r=i.MILLIS_MIN),this.mutate(function(i){return i.setHours(t,e,n,r)})},t.prototype.withTime=function(t){return this.withTimes(t.hour,t.minute,t.second,t.millisecond)},t.prototype.asTime=function(){return new St(this.hour,this.minute,this.seconds,this.millis)},t.prototype.startOf=function(t){var e=this;return this.mutate(function(n){return y[t](n,e.getLocale())})},t.prototype.endOf=function(t,e){var n=this;return void 0===e&&(e=!1),e?this.mutate(function(e){y[t](e,n.getLocale()),m[t](e,1)}):this.mutate(function(e){return v[t](e,n.getLocale())})},t.prototype.start=function(){return this.startOf("day")},t.prototype.isStart=function(){return this.hour===i.HOUR_MIN&&this.minute===i.MINUTE_MIN&&this.seconds===i.SECOND_MIN&&this.millis===i.MILLIS_MIN},t.prototype.end=function(t){return void 0===t&&(t=!0),this.endOf("day",t)},t.prototype.isEnd=function(){return this.hour===i.HOUR_MAX&&this.minute===i.MINUTE_MAX&&this.seconds===i.SECOND_MAX&&this.millis===i.MILLIS_MAX},t.prototype.startOfHour=function(){return this.startOf("hour")},t.prototype.isStartOfHour=function(){return this.minute===i.MINUTE_MIN&&this.seconds===i.SECOND_MIN&&this.millis===i.MILLIS_MIN},t.prototype.endOfHour=function(t){return void 0===t&&(t=!0),this.endOf("hour",t)},t.prototype.isEndOfHour=function(){return this.minute===i.MINUTE_MAX&&this.seconds===i.SECOND_MAX&&this.millis===i.MILLIS_MAX},t.prototype.startOfWeek=function(){return this.startOf("week")},t.prototype.isStartOfWeek=function(){return this.dayOfWeek===i.WEEKDAY_MIN},t.prototype.endOfWeek=function(t){return void 0===t&&(t=!0),this.endOf("week",t)},t.prototype.isEndOfWeek=function(){return this.dayOfWeek===i.WEEKDAY_MAX},t.prototype.startOfMonth=function(){return this.startOf("month")},t.prototype.isStartOfMonth=function(){return this.dayOfMonth===i.DAY_MIN},t.prototype.endOfMonth=function(t){return void 0===t&&(t=!0),this.endOf("month",t)},t.prototype.isEndOfMonth=function(){return this.dayOfMonth===this.daysInMonth()},t.prototype.startOfYear=function(){return this.startOf("year")},t.prototype.isStartOfYear=function(){return this.month===i.MONTH_MIN&&this.dayOfMonth===i.DAY_MIN},t.prototype.endOfYear=function(t){return void 0===t&&(t=!0),this.endOf("year",t)},t.prototype.isEndOfYear=function(){return this.month===i.MONTH_MAX&&this.dayOfMonth===i.DAY_MAX},t.prototype.daysInMonth=function(){return V(this.date)},t.prototype.daysInYear=function(){return P(this.date)},t.prototype.weeksInYear=function(){return t=this.date,void 0===e&&(e=p.current),D(g(t,Q),e)+1;var t,e},t.prototype.format=function(t,e){return void 0===e&&(e=!1),s.format(t,[this,this.getLocale()],e)},t.prototype.utc=function(t){return this},t.prototype.toDate=function(){return new Date(this.date.getTime())},t.prototype.toArray=function(){return[this.year,this.month,this.dayOfMonth,this.hour,this.minute,this.seconds,this.millis]},t.prototype.toJSON=function(){return this.date.toJSON()},t.prototype.toISOString=function(t){return void 0===t&&(t=!1),this.date.toISOString()},t.prototype.toObject=function(){throw new Error("toObject is no longer supported")},t.prototype.toString=function(){return this.date.toString()},t.prototype.isDST=function(){return t=this.date,(e=C(t))>C(g(t,function(t){return t.setMonth(0)}))||e>C(g(t,function(t){return t.setMonth(5)}));var t,e},t.prototype.isLeapYear=function(){return q(this.date)},t.prototype.offset=function(){return C(this.date)},t.now=function(){return new t(new Date)},t.today=function(){return this.now().start()},t.tomorrow=function(){return this.today().next()},t.fromDate=function(e){return isFinite(e.getTime())?new t(e):null},t.unix=function(t){return this.fromDate(new Date(t))},t.unixSeconds=function(t){return this.fromDate(new Date(t*i.MILLIS_IN_SECOND))},t.parse=function(t){return Et.day(t)},t.fromString=function(t){return this.fromDate(new Date(t))},t.fromFormat=function(t,e){throw new Error("fromFormat is no longer supported")},t.fromObject=function(t){throw new Error("fromObject is no longer supported")},t.fromArray=function(t){return this.fromDate(new Date(t[0],t[1],o.coalesce(t[2],i.DAY_MIN),o.coalesce(t[3],i.HOUR_MIN),o.coalesce(t[4],i.MINUTE_MIN),o.coalesce(t[5],i.SECOND_MIN),o.coalesce(t[6],i.MILLIS_MIN)))},t.fromDayIdentifier=function(t){var e=t%100,n=Math.floor(t/100)%100-1,r=Math.floor(t/1e4);return this.build(r,n,e)},t.build=function(e,n,r,o,u,s,a){return void 0===r&&(r=i.DAY_MIN),void 0===o&&(o=i.HOUR_MIN),void 0===u&&(u=i.MINUTE_MIN),void 0===s&&(s=i.SECOND_MIN),void 0===a&&(a=i.MILLIS_MIN),new t(new Date(e,n,r,o,u,s,a))},t}(),Dt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentDay=!1,e.currentWeek=!1,e.currentMonth=!1,e.currentYear=!1,e.currentOffset=0,e.selectedDay=!1,e.selectedWeek=!1,e.selectedMonth=!1,e.selectedYear=!1,e.inCalendar=!1,e.events=[],e}return Dt(e,t),e.prototype.iterateEvents=function(){return r.Iterate.array(this.events)},e.prototype.updateCurrent=function(t){return this.currentDay=this.sameDay(t),this.currentWeek=this.sameWeek(t),this.currentMonth=this.sameMonth(t),this.currentYear=this.sameYear(t),this.currentOffset=this.daysBetween(t,j.DOWN,!1),this},e.prototype.updateSelected=function(t){return this.selectedDay=t.matchesDay(this),this.selectedWeek=t.matchesWeek(this),this.selectedMonth=t.matchesMonth(this),this.selectedYear=t.matchesYear(this),this},e.prototype.clearSelected=function(){return this.selectedDay=this.selectedWeek=this.selectedMonth=this.selectedYear=!1,this},e}(wt),It=function(){function t(t,e,n,r){this.row=0,this.col=0,this.id=t,this.event=e,this.time=n,this.day=r,this.fullDay=e.schedule.isFullDay(),this.meta=e.schedule.getMeta(n.start),this.cancelled=e.schedule.isCancelled(n.start),this.starting=n.isPoint||n.start.sameDay(r),this.ending=n.isPoint||n.end.relative(-1).sameDay(r)}return Object.defineProperty(t.prototype,"scheduleId",{get:function(){return Math.floor(this.id/i.MAX_EVENTS_PER_DAY)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return this.time.start},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.time.end},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"schedule",{get:function(){return this.event.schedule},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this.event.data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.identifierType.get(this.start)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifierType",{get:function(){return this.schedule.identifierType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startDelta",{get:function(){return this.time.startDelta(this.day)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endDelta",{get:function(){return this.time.endDelta(this.day)},enumerable:!0,configurable:!0}),t.prototype.getTimeBounds=function(t,e,n,r,i,o){return void 0===t&&(t=1),void 0===e&&(e=1),void 0===n&&(n=.1),void 0===r&&(r=!0),void 0===i&&(i=0),void 0===o&&(o=0),this.time.getBounds(this.day,t,e,this.col*n,r,i,o)},t.prototype.cancel=function(t){return void 0===t&&(t=!0),this.schedule.setCancelled(this.start,t),this.cancelled=t,this},t.prototype.exclude=function(t){return void 0===t&&(t=!0),this.schedule.setExcluded(this.start,t),this},t.prototype.move=function(t){return this.schedule.move(t,this.start)},t}(),_t=function(){function t(t,e,n,r,i,u,s){this.fill=!1,this.minimumSize=0,this.repeatCovers=!0,this.listTimes=!1,this.eventsOutside=!1,this.updateRows=!1,this.updateColumns=!1,this.eventSorter=null,this.parseMeta=function(t){return t},this.parseData=function(t){return t},this.selection=null,this.days=[],this.events=[],this.visible=[],this.span=new ut(t,e),this.filled=new ut(t,e),this.type=n,this.size=r,this.moveStart=i,this.moveEnd=u,o.isDefined(s)?this.set(s):this.refresh()}return t.prototype.set=function(e){var n=o.isDefined(e.type)&&e.type!==this.type,r=o.isDefined(e.size)&&e.size!==this.size;if(n||r){var i=o.coalesce(e.otherwiseFocus,t.DEFAULT_FOCUS),u=o.coalesce(e.preferToday,!0),s=o.coalesce(e.size,this.size),a=o.coalesce(e.type,this.type),f=wt.today();(!(d=o.coalesce(e.around,this.days[Math.floor((this.days.length-1)*i)]))||u&&this.span.matchesDay(f))&&(d=f);var c=(l=t.TYPES[a]).getStart(wt.parse(d),s,i),h=l.getEnd(c,s,i);this.span.start=c,this.span.end=h,this.type=a,this.size=s,this.moveStart=l.moveStart,this.moveEnd=l.moveEnd}else if(e.around){var l,p=o.coalesce(e.otherwiseFocus,t.DEFAULT_FOCUS),d=wt.parse(e.around);a=this.type,s=this.size,c=(l=t.TYPES[a]).getStart(d,s,p),h=l.getEnd(c,s,p);this.span.start=c,this.span.end=h}return this.fill=o.coalesce(e.fill,this.fill),this.minimumSize=o.coalesce(e.minimumSize,this.minimumSize),this.repeatCovers=o.coalesce(e.repeatCovers,this.repeatCovers),this.listTimes=o.coalesce(e.listTimes,this.listTimes),this.eventsOutside=o.coalesce(e.eventsOutside,this.eventsOutside),this.updateRows=o.coalesce(e.updateRows,this.updateRows),this.updateColumns=o.coalesce(e.updateColumns,this.updateColumns),this.eventSorter=o.coalesce(e.eventSorter,this.eventSorter),this.parseMeta=o.coalesce(e.parseMeta,this.parseMeta),this.parseData=o.coalesce(e.parseData,this.parseData),o.isArray(e.events)&&this.setEvents(e.events,!0),e.delayRefresh||this.refresh(),this},t.prototype.withMinimumSize=function(t){return this.minimumSize=t,this.refresh(),this},t.prototype.withRepeatCovers=function(t){return this.repeatCovers=t,this.refreshEvents(),this},t.prototype.withListTimes=function(t){return this.listTimes=t,this.refreshEvents(),this},t.prototype.withEventsOutside=function(t){return this.eventsOutside=t,this.refreshEvents(),this},t.prototype.withUpdateRows=function(t,e){return void 0===e&&(e=!0),this.updateRows=t,e&&t&&this.refreshRows(),this},t.prototype.withUpdateColumns=function(t,e){return void 0===e&&(e=!0),this.updateColumns=t,e&&t&&this.refreshColumns(),this},Object.defineProperty(t.prototype,"start",{get:function(){return this.span.start},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.span.end},enumerable:!0,configurable:!0}),t.prototype.summary=function(t,e,n,r,i){return void 0===t&&(t=!0),void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===i&&(i=" - "),this.span.summary(this.type,t,e,n,r,i)},t.prototype.split=function(e){var n=this;return void 0===e&&(e=1),new r.Iterate(function(i){for(var o=n.start,u=n.moveEnd(n.end,e-n.size),s=0;s<n.size;s++){var a=new t(o,u,n.type,e,n.moveStart,n.moveEnd,n);if(i.act(a,s)===r.IterateAction.STOP)return;o=n.moveStart(o,e),u=n.moveEnd(u,e)}})},t.prototype.refresh=function(t){return void 0===t&&(t=wt.today()),this.length=this.span.days(j.UP,!0),this.resetDays(),this.refreshCurrent(t),this.refreshSelection(),this.refreshVisible(),this.refreshEvents(),this},t.prototype.resetFilled=function(){return this.filled.start=this.fill?this.start.startOfWeek():this.start,this.filled.end=this.fill?this.end.endOfWeek():this.end,this},t.prototype.resetDays=function(){this.resetFilled();for(var t=this.days,e=this.filled,n=e.days(j.UP),r=Math.max(this.minimumSize,n),i=e.start,o=0;o<r;o++){var u=t[o];u&&u.sameDay(i)||(u=new kt(i.date),o<t.length?t.splice(o,1,u):t.push(u)),u.inCalendar=this.span.contains(u),i=i.next()}return t.length>r&&t.splice(r,t.length-r),this},t.prototype.refreshVisible=function(){var t=this.filled.start,e=this.filled.end;return this.visible=this.events.filter(function(n){return n.visible&&n.schedule.matchesRange(t,e)}),this},t.prototype.refreshCurrent=function(t){return void 0===t&&(t=wt.today()),this.iterateDays().each(function(e){return e.updateCurrent(t)}),this},t.prototype.refreshSelection=function(){var t=this;return this.iterateDays().each(function(e){t.selection?e.updateSelected(t.selection):e.clearSelected()}),this},t.prototype.refreshEvents=function(){var t=this;return this.iterateDays().each(function(e){(e.inCalendar||t.eventsOutside)&&(e.events=t.eventsForDay(e,t.listTimes,t.repeatCovers))}),this.updateRows&&this.refreshRows(),this.updateColumns&&this.refreshColumns(),this},t.prototype.refreshRows=function(){var t=this.listTimes,e={};return this.iterateDays().each(function(n){0===n.dayOfWeek&&(e={});for(var r={},i=0,o=n.events;i<o.length;i++){var u=o[i];t&&!u.fullDay||u.id in e&&(r[u.row=e[u.id]]=!0)}for(var s=0,a=0,f=n.events;a<f.length;a++){var c=f[a];if(!(t&&!c.fullDay||c.id in e)){for(;r[s];)s++;e[c.id]=c.row=s,s++}}}),this},t.prototype.refreshColumns=function(){return this.iterateDays().each(function(t){for(var e=[],n=0,r=t.events;n<r.length;n++){var i=r[n];i.fullDay||(e.push({event:i,time:i.time.start.time,start:!0,parent:null}),e.push({event:i,time:i.time.end.time-1,start:!1,parent:null}))}e.sort(function(t,e){return t.time-e.time});for(var o=null,u=0,s=e;u<s.length;u++){(c=s[u]).start?(c.parent=o,o=c):o&&(o=o.parent)}for(var a=0,f=e;a<f.length;a++){var c;(c=f[a]).start&&(c.event.col=c.parent?c.parent.event.col+1:0)}}),this},t.prototype.getDay=function(t){var e=wt.parse(t);if(e){var n=e.start().daysBetween(this.days[0],j.DOWN,!1);return this.days[n]}return null},t.prototype.iterateDays=function(){var t=this;return new r.Iterate(function(e){for(var n=t.days,i=0;i<n.length;i++)switch(e.act(n[i],i)){case r.IterateAction.STOP:return}})},t.prototype.eventsForDay=function(t,e,n,r){void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===r&&(r=this.eventSorter);for(var o=[],u=this.visible,s=function(r){var s=u[r],a=s.schedule,f=r*i.MAX_EVENTS_PER_DAY,c=0;a.iterateSpans(t,n).each(function(n,r,i){o.push(new It(f+c++,s,n,t)),e||i.stop()})},a=0;a<u.length;a++)s(a);return r&&o.sort(r),o},t.prototype.findEvent=function(t){for(var e=0,n=this.events;e<n.length;e++){var r=n[e];if(r===t||r.schedule===t||r.data===t||r.id===t)return r}return null},t.prototype.removeEvents=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=!1),t)for(var n=0,r=t;n<r.length;n++){var i=r[n];this.removeEvent(i,!0)}else this.events=[];return this.refreshVisible(),e||this.refreshEvents(),this},t.prototype.removeEvent=function(t,e){void 0===e&&(e=!1);var n=this.findEvent(t);return n&&(this.events.splice(this.events.indexOf(n),1),this.refreshVisible(),e||this.refreshEvents()),this},t.prototype.addEvent=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=Et.event(t,this.parseData,this.parseMeta);if(!e&&this.findEvent(r))return this;return this.events.push(r),this.refreshVisible(),n||this.refreshEvents(),this},t.prototype.addEvents=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);for(var r=0,i=t;r<i.length;r++){var o=i[r];this.addEvent(o,e,!0)}return n||this.refreshEvents(),this},t.prototype.setEvents=function(t,e){void 0===e&&(e=!1);for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r],u=Et.event(o,this.parseData,this.parseMeta);u&&n.push(u)}return this.events=n,this.refreshVisible(),e||this.refreshEvents(),this},t.prototype.select=function(t,e){return void 0===e&&(e=t),this.selection=new ut(t,e),this.refreshSelection(),this},t.prototype.unselect=function(){return this.selection=null,this.refreshSelection(),this},t.prototype.move=function(t,e){return void 0===t&&(t=this.size),void 0===e&&(e=!1),this.span.start=this.moveStart(this.start,t),this.span.end=this.moveEnd(this.end,t),e||this.refresh(),this},t.prototype.next=function(t,e){return void 0===t&&(t=this.size),void 0===e&&(e=!1),this.move(t,e)},t.prototype.prev=function(t,e){return void 0===t&&(t=this.size),void 0===e&&(e=!1),this.move(-t,e)},t.prototype.toInput=function(t,e,n){void 0===t&&(t=!1),void 0===e&&(e=function(t){return t}),void 0===n&&(n=function(t){return t});var r={};r.type=this.type,r.size=this.size,r.fill=this.fill,r.minimumSize=this.minimumSize,r.repeatCovers=this.repeatCovers,r.listTimes=this.listTimes,r.eventsOutside=this.eventsOutside,r.updateRows=this.updateRows,r.updateColumns=this.updateColumns,r.around=t?this.span.start.time:this.span.start,r.events=[];for(var i=0,u=this.events;i<u.length;i++){var s=u[i];if(t){var a={};o.isDefined(s.id)&&(a.id=s.id),o.isDefined(s.data)&&(a.data=e(s.data)),s.visible||(a.visible=s.visible),a.schedule=s.schedule.toInput();var f=a.schedule.meta;if(f)for(var c in f)f[c]=n(f[c]);r.events.push(a)}else r.events.push(s)}return r},t.fromInput=function(e){var n=wt.today();return new t(n,n,null,1,null,null,e)},t.forType=function(e,n,r,i,o){void 0===n&&(n=1),void 0===r&&(r=wt.today()),void 0===i&&(i=.49999);var u=this.TYPES[e],s=u.getStart(r,n,i);return new t(s,u.getEnd(s,n,i),e,n,u.moveStart,u.moveEnd,o||u.defaultInput)},t.days=function(t,e,n,r){return void 0===t&&(t=1),void 0===e&&(e=wt.today()),void 0===n&&(n=.4999),this.forType(yt.DAY,t,e,n,r)},t.weeks=function(t,e,n,r){return void 0===t&&(t=1),void 0===e&&(e=wt.today()),void 0===n&&(n=.4999),this.forType(yt.WEEK,t,e,n,r)},t.months=function(t,e,n,r){return void 0===t&&(t=1),void 0===e&&(e=wt.today()),void 0===n&&(n=.4999),this.forType(yt.MONTH,t,e,n,r)},t.years=function(t,e,n,r){return void 0===t&&(t=1),void 0===e&&(e=wt.today()),void 0===n&&(n=.4999),this.forType(yt.YEAR,t,e,n,r)},t.DEFAULT_FOCUS=.4999,t.TYPES=((Ot={})[yt.DAY]={getStart:function(t,e,n){return t.start().relativeDays(-Math.floor(e*n))},getEnd:function(t,e,n){return t.relativeDays(e-1).end()},moveStart:function(t,e){return t.relativeDays(e)},moveEnd:function(t,e){return t.relativeDays(e)},defaultInput:void 0},Ot[yt.WEEK]={getStart:function(t,e,n){return t.start().startOfWeek().relativeWeeks(-Math.floor(e*n))},getEnd:function(t,e,n){return t.relativeWeeks(e-1).endOfWeek()},moveStart:function(t,e){return t.relativeWeeks(e)},moveEnd:function(t,e){return t.relativeWeeks(e)},defaultInput:void 0},Ot[yt.MONTH]={getStart:function(t,e,n){return t.start().startOfMonth().relativeMonths(-Math.floor(e*n))},getEnd:function(t,e,n){return t.relativeMonths(e-1).endOfMonth()},moveStart:function(t,e){return t.relativeMonths(e)},moveEnd:function(t,e){return t.startOfMonth().relativeMonths(e).endOfMonth()},defaultInput:{fill:!0}},Ot[yt.YEAR]={getStart:function(t,e,n){return t.start().startOfYear().relativeYears(-Math.floor(e*n))},getEnd:function(t,e,n){return t.relativeYears(e-1).endOfYear()},moveStart:function(t,e){return t.relativeYears(e)},moveEnd:function(t,e){return t.relativeYears(e)},defaultInput:{fill:!0}},Ot),t}(),Yt=function(){function t(){}return t.JANUARY=0,t.FEBRUARY=1,t.MARCH=2,t.APRIL=3,t.MAY=4,t.JUNE=5,t.JULY=6,t.AUGUST=7,t.SEPTEMBER=8,t.OCTOBER=9,t.NOVEMBER=10,t.DECEMBER=11,t.LIST=[t.JANUARY,t.FEBRUARY,t.MARCH,t.APRIL,t.MAY,t.JUNE,t.JULY,t.AUGUST,t.SEPTEMBER,t.OCTOBER,t.NOVEMBER,t.DECEMBER],t}(),Nt=function(){function t(t,e,n,r){this.name=t,this.listed=e,this.describe=n,this.rules=r}return t.prototype.apply=function(t,e){return t instanceof Mt?(this.applyGeneric(e,function(e,n){return t.setFrequency(e,n)},function(e){return t.setFrequency(e)}),t.updateChecks()):this.applyGeneric(e,function(e,n){return t[e]=n},function(e){return delete t[e]}),t},t.prototype.applyGeneric=function(e,n,r){for(var i=0,u=t.PROPS;i<u.length;i++){var s=u[i],a=this.rules[s];1===a&&n(s,[e[s]]),o.isArray(a)&&n(s,a),o.isDefined(a)||r(s)}},t.prototype.isMatch=function(t,e){return t instanceof Mt?this.isMatchGeneric(function(e){return t[e].input},e):this.isMatchGeneric(function(e){return t[e]},e)},t.prototype.isMatchGeneric=function(e,n){for(var r=o.isDefined(n),i=0,u=t.PROPS;i<u.length;i++){var s=u[i],a=this.rules[s],f=e(s);if(!1!==a){if(!0===a&&!f)return!1;if(!o.isDefined(a)&&f)return!1;if(o.isNumber(a)){if(!o.isArray(f)||f.length!==a)return!1;if(r&&-1===f.indexOf(n[s]))return!1}if(o.isArray(a)){if(!o.isArray(f))return!1;if(a.length!==f.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==f[c])return!1;if(r&&-1===a.indexOf(n[s]))return!1}if(o.isFrequencyValueEvery(a)){if(!o.isFrequencyValueEvery(f))return!1;var h=a.offset||0;if((f.offset||0)!==h||f.every!==a.every)return!1;if(r&&n[s]%a.every!==h)return!1}}}return!0},t.withName=function(t){return At[t]},t.findMatch=function(t,e,n){void 0===e&&(e=!0);for(var r=0,i=bt;r<i.length;r++){var o=i[r];if((o.listed||!e)&&o.isMatch(t,n))return o}return null},t.PROPS=["dayOfWeek","dayOfMonth","lastDayOfMonth","dayOfYear","month","week","year","weekOfYear","weekspanOfYear","fullWeekOfYear","lastWeekspanOfYear","lastFullWeekOfYear","weekOfMonth","weekspanOfMonth","fullWeekOfMonth","lastWeekspanOfMonth","lastFullWeekOfMonth"],t}(),bt=[new Nt("none",!0,function(t){return p.current.patternNone(t)},{year:1,month:1,dayOfMonth:1}),new Nt("daily",!0,function(t){return p.current.patternDaily(t)},{}),new Nt("weekly",!0,function(t){return p.current.patternWeekly(t)},{dayOfWeek:1}),new Nt("monthlyWeek",!0,function(t){return p.current.patternMonthlyWeek(t)},{dayOfWeek:1,weekspanOfMonth:1}),new Nt("annually",!0,function(t){return p.current.patternAnnually(t)},{month:1,dayOfMonth:1}),new Nt("annuallyMonthWeek",!0,function(t){return p.current.patternAnnuallyMonthWeek(t)},{month:1,dayOfWeek:1,weekspanOfMonth:1}),new Nt("weekday",!0,function(t){return p.current.patternWeekday(t)},{dayOfWeek:[d.MONDAY,d.TUESDAY,d.WEDNESDAY,d.THURSDAY,d.FRIDAY]}),new Nt("monthly",!0,function(t){return p.current.patternMonthly(t)},{dayOfMonth:1}),new Nt("lastDay",!1,function(t){return p.current.patternLastDay(t)},{lastDayOfMonth:[1]}),new Nt("lastDayOfMonth",!1,function(t){return p.current.patternLastDayOfMonth(t)},{month:1,lastDayOfMonth:[1]}),new Nt("lastWeekday",!1,function(t){return p.current.patternLastWeekday(t)},{lastWeekspanOfMonth:[0],dayOfWeek:1,month:1}),new Nt("custom",!0,function(t){return p.current.patternCustom(t)},{dayOfWeek:!1,dayOfMonth:!1,lastDayOfMonth:!1,dayOfYear:!1,year:!1,month:!1,week:!1,weekOfYear:!1,weekspanOfYear:!1,fullWeekOfYear:!1,lastWeekspanOfYear:!1,lastFullWeekOfYear:!1,weekOfMonth:!1,weekspanOfMonth:!1,fullWeekOfMonth:!1,lastWeekspanOfMonth:!1,lastFullWeekOfMonth:!1})],At={},Tt=0,Wt=bt;Tt<Wt.length;Tt++){var Lt=Wt[Tt];At[Lt.name]=Lt}var Rt=function(){function t(){}return t.Start=function(t,e){return t.time.start.time-e.time.start.time},t.End=function(t,e){return t.time.end.time-e.time.end.time},t.FullDay=function(t,e){return(t.fullDay?0:1)-(e.fullDay?0:1)},t.Duration=function(t,e){return t.time.millis()-e.time.millis()},t.Desc=function(t){return function(e,n){return t(n,e)}},t.Alphabetical=function(t){return function(e,n){var r=t(e.event)||"",i=t(n.event)||"";return r.localeCompare(i)}},t.Ordered=function(t){return function(e,n){return t(e.event)-t(n.event)}},t.List=function(t){return function(e,n){for(var r=0,i=t;r<i.length;r++){var o=(0,i[r])(e,n);if(0!==o)return o}return 0}},t}();n.d(e,"Calendar",function(){return _t}),n.d(e,"CalendarDay",function(){return kt}),n.d(e,"CalendarEvent",function(){return It}),n.d(e,"Event",function(){return vt}),n.d(e,"Constants",function(){return i}),n.d(e,"Day",function(){return wt}),n.d(e,"DayFormat",function(){return s}),n.d(e,"DaySpan",function(){return ut}),n.d(e,"Format",function(){return u}),n.d(e,"Functions",function(){return o}),n.d(e,"Identifier",function(){return at}),n.d(e,"Locales",function(){return p}),n.d(e,"Month",function(){return Yt}),n.d(e,"Op",function(){return j}),n.d(e,"operate",function(){return it}),n.d(e,"Parse",function(){return Et}),n.d(e,"Pattern",function(){return Nt}),n.d(e,"Patterns",function(){return bt}),n.d(e,"PatternMap",function(){return At}),n.d(e,"Ref",function(){return l}),n.d(e,"Schedule",function(){return Mt}),n.d(e,"ScheduleModifier",function(){return mt}),n.d(e,"Sorts",function(){return Rt}),n.d(e,"Time",function(){return St}),n.d(e,"TimeFormat",function(){return gt}),n.d(e,"Units",function(){return yt}),n.d(e,"Weekday",function(){return d})}])});
//# sourceMappingURL=dayspan.js.map